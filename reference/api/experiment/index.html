



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Chaos Toolkit">
      
      
      
        <meta name="author" content="The Chaos Toolkit Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../static/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Experiment - Chaos Toolkit</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../static/css/extra.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-107338053-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="white" data-md-color-accent="yellow">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#an-open-api-for-chaos-engineering-experiments" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Chaos Toolkit" class="md-header-nav__button md-logo">
          
            <img src="../../../static/images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Chaos Toolkit
            </span>
            <span class="md-header-nav__topic">
              Experiment
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/chaostoolkit/chaostoolkit/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    chaostoolkit
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Chaos Toolkit" class="md-nav__button md-logo">
      
        <img src="../../../static/images/logo.png" width="48" height="48">
      
    </a>
    Chaos Toolkit
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/chaostoolkit/chaostoolkit/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    chaostoolkit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Usage
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Usage
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/upgrade/" title="Upgrade" class="md-nav__link">
      Upgrade
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/cli/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/discover/" title="Discover" class="md-nav__link">
      Discover
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/init/" title="Init" class="md-nav__link">
      Init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/run/" title="Run" class="md-nav__link">
      Run
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/report/" title="Report" class="md-nav__link">
      Report
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/notification/" title="Notify" class="md-nav__link">
      Notify
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../usage/scheduling/" title="Schedule" class="md-nav__link">
      Schedule
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorial/" title="Get Started with the Chaos Toolkit" class="md-nav__link">
      Get Started with the Chaos Toolkit
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Drivers Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Drivers Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Infrastructure/Platform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Infrastructure/Platform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/aws/" title="AWS" class="md-nav__link">
      AWS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/azure/" title="Azure" class="md-nav__link">
      Azure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/cloudfoundry/" title="Cloud Foundry" class="md-nav__link">
      Cloud Foundry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/gce/" title="GCE" class="md-nav__link">
      GCE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/kubernetes/" title="Kubernetes" class="md-nav__link">
      Kubernetes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/service-fabric/" title="Service Fabric" class="md-nav__link">
      Service Fabric
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Application
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Application
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/spring/" title="Spring" class="md-nav__link">
      Spring
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Network
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Network
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/toxiproxy/" title="ToxiProxy" class="md-nav__link">
      ToxiProxy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Observability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Observability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/humio/" title="Humio" class="md-nav__link">
      Humio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/prometheus/" title="Prometheus" class="md-nav__link">
      Prometheus
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../drivers/opentracing/" title="Open Tracing" class="md-nav__link">
      Open Tracing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Chaos Open API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Chaos Open API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Experiment
      </label>
    
    <a href="./" title="Experiment" class="md-nav__link md-nav__link--active">
      Experiment
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conventions-used-in-this-document" title="Conventions Used in This Document" class="md-nav__link">
    Conventions Used in This Document
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#other-formats" title="Other formats" class="md-nav__link">
    Other formats
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chaos-engineering-elements" title="Chaos Engineering Elements" class="md-nav__link">
    Chaos Engineering Elements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experiment" title="Experiment" class="md-nav__link">
    Experiment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steady-state-hypothesis" title="Steady State Hypothesis" class="md-nav__link">
    Steady State Hypothesis
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#steady-state-probe-tolerance" title="Steady State Probe Tolerance" class="md-nav__link">
    Steady State Probe Tolerance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contributions" title="Contributions" class="md-nav__link">
    Contributions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method" title="Method" class="md-nav__link">
    Method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probe" title="Probe" class="md-nav__link">
    Probe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action" title="Action" class="md-nav__link">
    Action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action-or-probe-provider" title="Action or Probe Provider" class="md-nav__link">
    Action or Probe Provider
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-provider" title="Python Provider" class="md-nav__link">
    Python Provider
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-provider" title="HTTP Provider" class="md-nav__link">
    HTTP Provider
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-provider" title="Process Provider" class="md-nav__link">
    Process Provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rollbacks" title="Rollbacks" class="md-nav__link">
    Rollbacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets" title="Secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-secrets" title="Inline Secrets" class="md-nav__link">
    Inline Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-secrets" title="Environment Secrets" class="md-nav__link">
    Environment Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vault-secrets" title="Vault Secrets" class="md-nav__link">
    Vault Secrets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-configurations" title="Inline Configurations" class="md-nav__link">
    Inline Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-configurations" title="Environment Configurations" class="md-nav__link">
    Environment Configurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-substitution" title="Variable Substitution" class="md-nav__link">
    Variable Substitution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controls" title="Controls" class="md-nav__link">
    Controls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensions" title="Extensions" class="md-nav__link">
    Extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-experiment" title="Minimal Experiment" class="md-nav__link">
    Minimal Experiment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-complex-experiment" title="More Complex Experiment" class="md-nav__link">
    More Complex Experiment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../journal/" title="Journal" class="md-nav__link">
      Journal
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Contribute
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Contribute
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../contributing/" title="Contributing to the Chaos Toolkit" class="md-nav__link">
      Contributing to the Chaos Toolkit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      Project Management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        Project Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developing/values/" title="Key Project Values" class="md-nav__link">
      Key Project Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developing/core/" title="Core Projects" class="md-nav__link">
      Core Projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developing/technologies/" title="Technology Choices" class="md-nav__link">
      Technology Choices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Develop
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Develop
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developing/guidelines/" title="Guidelines" class="md-nav__link">
      Guidelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Driver Extension
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Driver Extension
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../extending/approaches/" title="Extension Approaches" class="md-nav__link">
      Extension Approaches
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../extending/extending-with-python/" title="Extend with Python" class="md-nav__link">
      Extend with Python
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      Control Extension
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        Control Extension
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../extending/create-control-extension/" title="Create Control" class="md-nav__link">
      Create Control
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../resources/logos/" title="Logos" class="md-nav__link">
      Logos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../resources/slides/" title="Slides" class="md-nav__link">
      Slides
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conventions-used-in-this-document" title="Conventions Used in This Document" class="md-nav__link">
    Conventions Used in This Document
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#other-formats" title="Other formats" class="md-nav__link">
    Other formats
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chaos-engineering-elements" title="Chaos Engineering Elements" class="md-nav__link">
    Chaos Engineering Elements
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#experiment" title="Experiment" class="md-nav__link">
    Experiment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#steady-state-hypothesis" title="Steady State Hypothesis" class="md-nav__link">
    Steady State Hypothesis
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#steady-state-probe-tolerance" title="Steady State Probe Tolerance" class="md-nav__link">
    Steady State Probe Tolerance
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contributions" title="Contributions" class="md-nav__link">
    Contributions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method" title="Method" class="md-nav__link">
    Method
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probe" title="Probe" class="md-nav__link">
    Probe
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action" title="Action" class="md-nav__link">
    Action
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action-or-probe-provider" title="Action or Probe Provider" class="md-nav__link">
    Action or Probe Provider
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-provider" title="Python Provider" class="md-nav__link">
    Python Provider
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http-provider" title="HTTP Provider" class="md-nav__link">
    HTTP Provider
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-provider" title="Process Provider" class="md-nav__link">
    Process Provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rollbacks" title="Rollbacks" class="md-nav__link">
    Rollbacks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secrets" title="Secrets" class="md-nav__link">
    Secrets
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-secrets" title="Inline Secrets" class="md-nav__link">
    Inline Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-secrets" title="Environment Secrets" class="md-nav__link">
    Environment Secrets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vault-secrets" title="Vault Secrets" class="md-nav__link">
    Vault Secrets
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" title="Configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inline-configurations" title="Inline Configurations" class="md-nav__link">
    Inline Configurations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-configurations" title="Environment Configurations" class="md-nav__link">
    Environment Configurations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-substitution" title="Variable Substitution" class="md-nav__link">
    Variable Substitution
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#controls" title="Controls" class="md-nav__link">
    Controls
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensions" title="Extensions" class="md-nav__link">
    Extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-experiment" title="Minimal Experiment" class="md-nav__link">
    Minimal Experiment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-complex-experiment" title="More Complex Experiment" class="md-nav__link">
    More Complex Experiment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/chaostoolkit/chaostoolkit/edit/master/docs/reference/api/experiment.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="an-open-api-for-chaos-engineering-experiments">An Open API for Chaos Engineering Experiments<a class="headerlink" href="#an-open-api-for-chaos-engineering-experiments" title="Permanent link">&para;</a></h1>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The current specification has not reached its 1.0.0 stable version yet. Make
sure to <a href="https://join.chaostoolkit.org/">join the discussion</a> to provide any feedback you might have.</p>
</div>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The purpose of this specification is to formalize the elements of a Chaos
Engineering experiment and offer a way to federate the community around a
common syntax and semantic.</p>
<p>As a fairly recent field, Chaos Engineering is a dynamic and its foundations
are still emerging. However, it appears certain concepts are settling down
enough to start agreeing on a shared understanding.</p>
<p>This specification is not prescriptive and does not aim at forcing the
community into one direction, rather it strives at providing a common
vocabulary that new practitioners can easily make sense of.</p>
<p>It is necessary to appreciate that this document does not specify what tools,
such as the Chaos Monkey or similar, should look like. Instead, this document
specifies how Chaos Engineering Experiment could be described, shared and
conducted collaboratively.</p>
<h2 id="conventions-used-in-this-document">Conventions Used in This Document<a class="headerlink" href="#conventions-used-in-this-document" title="Permanent link">&para;</a></h2>
<p>The key words &ldquo;MUST&rdquo;, &ldquo;MUST NOT&rdquo;, &ldquo;REQUIRED&rdquo;, &ldquo;SHALL&rdquo;, &ldquo;SHALL NOT&rdquo;,
&ldquo;SHOULD&rdquo;, &ldquo;SHOULD NOT&rdquo;, &ldquo;RECOMMENDED&rdquo;, &ldquo;MAY&rdquo;, and &ldquo;OPTIONAL&rdquo; in this
document are to be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">RFC 2119</a>.</p>
<p>The terms &ldquo;JSON&rdquo;, &ldquo;JSON text&rdquo;, &ldquo;JSON value&rdquo;, &ldquo;member&rdquo;, &ldquo;element&rdquo;, &ldquo;object&rdquo;,
&ldquo;array&rdquo;, &ldquo;number&rdquo;, &ldquo;string&rdquo;, &ldquo;boolean&rdquo;, &ldquo;true&rdquo;, &ldquo;false&rdquo;, and &ldquo;null&rdquo; in this
document are to be interpreted as defined in <a href="https://tools.ietf.org/html/rfc7159">RFC 7159</a>.</p>
<h3 id="other-formats">Other formats<a class="headerlink" href="#other-formats" title="Permanent link">&para;</a></h3>
<p>While this specification uses JSON to define its elements, implementations may
allow loading from other formats, such as <a href="http://yaml.org/spec/">YAML</a>. As long as the output
of such format respects the specification herein.</p>
<h2 id="chaos-engineering-elements">Chaos Engineering Elements<a class="headerlink" href="#chaos-engineering-elements" title="Permanent link">&para;</a></h2>
<h3 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h3>
<p>An Experiment is one possible description of the
<a href="http://principlesofchaos.org/">principles of the Chaos Engineering</a>. The intention of such a
description is to provide shared understanding around a hypothesis on how
to discover system&rsquo;s behavior under certain conditions.</p>
<p>An <a href="#experiment">Experiment</a> declares a steady <a href="#steady-state-hypothesis">state hypothesis</a>, alongside
<a href="#probe">probes</a> to validate this steady state is met, and a <a href="#method">method</a> as a
sequence <a href="#action">actions</a> and <a href="#probe">probes</a>, to interact and query the system
respectively.</p>
<p>By using a variety of <a href="#probe">probes</a>, experiments should gather information to
sense behaviors in the system, potentially leading to systemic patterns that can
be stabilized.</p>
<h3 id="experiment">Experiment<a class="headerlink" href="#experiment" title="Permanent link">&para;</a></h3>
<p>A Chaos Engineering experiment, or simply an experiment, describes both the
elements and the order in which they should be applied.</p>
<p>An experiment is a JSON object.</p>
<p>An experiment MUST declare:</p>
<ul>
<li>a <code>version</code> property</li>
<li>a <code>title</code> property</li>
<li>a <code>description</code> property</li>
<li>a <code>method</code> property</li>
</ul>
<p>The <code>version</code> property MUST be <code>"0.1.0"</code>.</p>
<p>The experiment&rsquo;s <code>title</code> and <code>description</code> are meant for humans and therefore
should be as descriptive as possible to clarify the experiment&rsquo;s rationale.</p>
<p>Title and description are JSON strings with no maximum length.</p>
<p>An experiment SHOULD also declare:</p>
<ul>
<li>a <code>steady-state-hypothesis</code> property</li>
<li>a <code>rollbacks</code> property</li>
</ul>
<p>An experiment MAY finally declare:</p>
<ul>
<li>a <code>tags</code> property</li>
<li>a <code>secrets</code> property</li>
<li>an <code>extension</code> property</li>
<li>a <code>contributions</code> property</li>
<li>a <code>controls</code> property</li>
</ul>
<p>Tags provide a way of categorizing experiments. It is a sequence of JSON
strings.</p>
<p><a href="#extensions">Extensions</a> define opaque payloads for vendors to carry valuable
information.</p>
<p><a href="#contributions">Contribution</a> describes valuable properties of the target system,
such as &ldquo;reliability&rdquo; or &ldquo;durability&rdquo;, that an experiment contribute to. This
information can be aggregated together with other experiments&rsquo; contributions to
better appreciate where the focus is put and where it is not.</p>
<p><a href="#controls">Controls</a> describe out-of-band capabilities applied during the
experiment&rsquo;s execution.</p>
<h3 id="steady-state-hypothesis">Steady State Hypothesis<a class="headerlink" href="#steady-state-hypothesis" title="Permanent link">&para;</a></h3>
<p>The Steady State Hypothesis element describes what normal looks like in your
system before the Method element is applied. If the steady state is not met,
the Method element is not applied and the experiment MUST bail out.</p>
<p>The Steady State Hypothesis element is a JSON object.</p>
<p>Steady State Hypothesis element MUST declare:</p>
<ul>
<li>a <code>title</code> property</li>
<li>a <code>probes</code> property</li>
</ul>
<p>The <code>title</code> is meant for humans and therefore should clarify the rationale for
this hypothesis.</p>
<p>Each <a href="#probe">Probe</a> MUST define a <code>tolerance</code> property that acting as a gate
mechanism for the experiment to carry on or bail. Any <a href="#probe">Probe</a> that does not
fall into the <a href="#steady-state-probe-tolerance">tolerance</a> zone MUST fail the experiment.</p>
<p>Steady State Hypothesis element MAY declare:</p>
<ul>
<li>a <code>controls</code> property</li>
</ul>
<p><a href="#controls">Controls</a> describe out-of-band capabilities applied during the
experiment&rsquo;s execution.</p>
<h4 id="steady-state-probe-tolerance">Steady State Probe Tolerance<a class="headerlink" href="#steady-state-probe-tolerance" title="Permanent link">&para;</a></h4>
<p><a href="#probe">Probes</a> of the Steady State Hypothesis MUST declare an additional property
named <code>tolerance</code>.</p>
<p>The <code>tolerance</code> property&rsquo;s value MUST be one of:</p>
<ul>
<li>a scalar: JSON string, number (an integer), boolean</li>
<li>a sequence of scalars: JSON string, number, boolean</li>
<li>an object</li>
</ul>
<p>In the case of a scalar or the sequence, the tolerance validation MUST be
strict. The value returned by the <a href="#probe">Probe</a> MUST be checked against the
scalar value. The experiment MUST bail when both fail to match.</p>
<p>When the <code>tolerance</code> is a sequence. If it has only two values, those two values
represent a lower and upper bound within which the <a href="#probe">Probe</a> returned value
must fall (inclusive).</p>
<p>When the sequence has more than two elements, the <a href="#probe">Probe</a> returned value
must be contained in that sequence.</p>
<p>When the <code>tolerance</code> is an object, it MUST have a <code>type</code> property which MUST
be one of the followings: <code>"probe"</code>, <code>"regex"</code>, <code>"jsonpath"</code> or <code>"range"</code>.</p>
<p>When the <code>type</code> property is <code>"probe"</code>, the object MUST be a <a href="#probe">Probe</a> that is
applied. The probe should take two arguments, <code>value</code> and <code>secrets</code> where
the value is the <a href="#probe">Probe</a> returned value and secrets a <a href="#secrets">Secret</a>
object or <code>null</code>. Its returned status MUST be successful for the <code>tolerance</code> to
be considered valid.</p>
<p>When the <code>type</code> property is <code>"regex"</code>, the object MUST have a <code>pattern</code>
property which MUST be a valid regular expression. The <code>tolerance</code> succeeds if
the <a href="#probe">Probe</a> returned value is matched against the pattern.</p>
<p>When the <code>type</code> property is <code>"jsonpath"</code>, the object MUST have a <code>path</code>
property which MUST be a valid <a href="http://goessner.net/articles/JsonPath/">JSON Path</a>. In addition, the object MAY
have a <code>expect</code> property which is used to compare each value matched by the JSON
Path to that value. The <code>expect</code> property value MUST be a scalar. When the
<code>expect</code> property is not present, the <code>tolerance</code> succeeds if the JSON Path
matched at least one item.</p>
<p>When the <code>type</code> property is <code>"range"</code>, the object MUST have a <code>range</code> 
property whuch MUST be a sequence of length two. The first entry of the
sequence MUST be the lower bound and the second entry MUST be the upper bound.
Both entries MUST be JSON numbers.</p>
<p>In addition, when the <a href="#probe">Probe</a> returned value is an object with a Ì€<code>status</code>
property, the tested value is the value of that property.</p>
<p>Some examples of <code>tolerance</code> properties.</p>
<p>A boolean tolerance:
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="kc">true</span>
</pre></div></p>
<p>A integer tolerance:
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="mi">8</span>
</pre></div></p>
<p>A string tolerance:
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="s2">&quot;OK&quot;</span>
</pre></div></p>
<p>A sequence tolerance with lower and upper bounds:
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div></p>
<p>A sequence tolerance, the value must be contained in that sequence:
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">78</span><span class="p">]</span>
</pre></div></p>
<p>A <a href="#probe">Probe</a> tolerance:
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;probe&quot;</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;should-exist&quot;</span><span class="p">,</span>
    <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
        <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;os.path&quot;</span><span class="p">,</span>
        <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;exists&quot;</span><span class="p">,</span>
        <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;some/file&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div></p>
<p>A regex tolerance:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;regex&quot;</span><span class="p">,</span>
    <span class="nt">&quot;pattern&quot;</span><span class="p">:</span> <span class="s2">&quot;[0-9]{3}&quot;</span>
<span class="p">}</span>
</pre></div>

<p>A jsonpath tolerance:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;jsonpath&quot;</span><span class="p">,</span>
    <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;foo[*].baz&quot;</span>
<span class="p">}</span>
</pre></div>

<p>A jsonpath tolerance with an expected value to match:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;jsonpath&quot;</span><span class="p">,</span>
    <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;foo[*].baz&quot;</span><span class="p">,</span>
    <span class="nt">&quot;expect&quot;</span><span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>
</pre></div>

<p>Two range tolerances:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
    <span class="nt">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="s2">&quot;tolerance&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
    <span class="nt">&quot;range&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">4.6</span><span class="p">,</span> <span class="mf">8.9</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>

<h3 id="contributions">Contributions<a class="headerlink" href="#contributions" title="Permanent link">&para;</a></h3>
<p>Contributions describe the valuable system properties an experiment targets as
well as how much they contributes to it. Those properties usually refer to
aspects stakeholders care about. Aggregated they offer a powerful metric about
the effort and focus on building confidence across the system.</p>
<p>Contributions are declared under the top-level <code>contributions</code> property as an
object. Properties of that object MUST be JSON strings representing the name
of a contribution. The values MUST be the weight of a given contribution and
MUST be one of <code>"high"</code>, <code>"medium"</code>, <code>"low"</code> or <code>"none"</code>. The <code>"none"</code> value
is not the same as a missing contribution from the <code>contributions</code> object.
That value marks explicitly that a given contribution is not addressed by an
experiment. A missing contribution means impact via this experiment is unknown
for this contribution.</p>
<p>Here is a contribution example:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;contributions&quot;</span><span class="err">:</span> <span class="p">{</span>  
    <span class="nt">&quot;reliability&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="nt">&quot;security&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
    <span class="nt">&quot;scalability&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span>
<span class="p">}</span>
</pre></div>

<p>This sample tells us that the experiment contributes mainly to exploring
reliability of the system and moderately to its scability. However, it is
explicit here this experiment does not address security.</p>
<p>On the other hand:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;contributions&quot;</span><span class="err">:</span> <span class="p">{</span>  
    <span class="nt">&quot;reliability&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
    <span class="nt">&quot;scalability&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span>
<span class="p">}</span>
</pre></div>

<p>This tells us the same about reliability and scalability but we can&rsquo;t presume
anything about security.</p>
<h3 id="method">Method<a class="headerlink" href="#method" title="Permanent link">&para;</a></h3>
<p>The Method describes the sequence of <a href="#probe">Probe</a> and <a href="#action">Action</a> elements
to apply. The Method is declared under <code>method</code> property at the top-level of the
experiment.</p>
<p>The <code>method</code> MUST have at least one element but this can be either a <a href="#probe">Probe</a>
or an <a href="#action">Action</a>.</p>
<p>The elements MUST be applied in the order they are declared.</p>
<h3 id="probe">Probe<a class="headerlink" href="#probe" title="Permanent link">&para;</a></h3>
<p>A Probe collects information from the system during the experiment.</p>
<p>A Probe is a JSON object. A Probe is declared fully or reference another Probe
through the <code>ref</code> property.</p>
<p>When declared fully, a Probe MUST declare:</p>
<ul>
<li>a <code>type</code> property</li>
<li>a <code>name</code> property</li>
<li>a <code>provider</code> property</li>
</ul>
<p>The <code>type</code> property MUST be the JSON string <code>"probe"</code>. </p>
<p>The <code>name</code> property is a free-form JSON string that MAY be considered as an
identifier within the experiment.</p>
<p>It MAY also declare:</p>
<ul>
<li>a <code>secret</code> property</li>
<li>a <code>configuration</code> property</li>
<li>a <code>background</code> property</li>
<li>a <code>controls</code> property</li>
</ul>
<p>The <code>secret</code> property MUST be a JSON string referencing an identifier declared
in the top-level <code>secrets</code> <a href="#secrets">property</a>. It is assumed that when not
declared, the Probe requires no secrets.</p>
<p>The <code>configuration</code> property MUST be a JSON string referencing an identifier
declared in the top-level <code>configuration</code> <a href="#configuration">property</a>. It is assumed that
when not declared, the Probe requires no configuration.</p>
<p>The <code>background</code> property MUST be a JSON boolean value either <code>true</code> or <code>false</code>.
It is assumed that, when that property is not declared, it is set to <code>false</code>.
When that property is set to <code>true</code> it indicates the Probe MUST not block
and the next Action or Probe should immediately be applied.</p>
<p>When a Probe references another Probe in the Experiment, the Probe MUST
declare a single property called <code>ref</code>.</p>
<p>The <code>ref</code> property MUST be a JSON string which MUST be the name of a declared
Probe.</p>
<p><a href="#controls">Controls</a> describe out-of-band capabilities applied during the
experiment&rsquo;s execution.</p>
<h3 id="action">Action<a class="headerlink" href="#action" title="Permanent link">&para;</a></h3>
<p>An Action performs an operation against the system.</p>
<p>An Action collects information from the system during the experiment.</p>
<p>An Action is a JSON object. An Action is declared fully or reference another
Action through the <code>ref</code> property.</p>
<p>When declared fully, a Action MUST declare:</p>
<ul>
<li>a <code>type</code> property</li>
<li>a <code>name</code> property</li>
<li>a <code>provider</code> property</li>
<li>a <code>controls</code> property</li>
</ul>
<p>The <code>type</code> property MUST be the JSON string <code>"action"</code>. </p>
<p>The <code>name</code> property is a free-form JSON string that MAY be considered as an
identifier within the experiment.</p>
<p>It MAY also declare:</p>
<ul>
<li>a <code>secret</code> property</li>
<li>a <code>configuration</code> property</li>
<li>a <code>background</code> property</li>
<li>a <code>pauses</code> property</li>
</ul>
<p>The <code>secret</code> property MUST be a JSON string referencing an identifier declared
in the top-level <code>secrets</code> <a href="#secrets">property</a>. It is assumed that when not
declared, the Action requires no secrets.</p>
<p>The <code>configuration</code> property MUST be a JSON string referencing an identifier
declared in the top-level <code>configuration</code> <a href="#configuration">property</a>. It is assumed that
when not declared, the Action requires no configuration.</p>
<p>The <code>background</code> property MUST be a JSON boolean value either <code>true</code> or <code>false</code>.
It is assumed that, when that property is not declared, it is set to <code>false</code>.
When that property is set to <code>true</code> it indicates the Action MUST not block
and the next Action or Probe should immediately be applied.</p>
<p>The <code>pauses</code> property MUST be a JSON object which MAY have one or the two
following properties:</p>
<ul>
<li><code>before</code></li>
<li><code>after</code></li>
</ul>
<p>In both cases, the value MUST be JSON number indicating the number of seconds to
wait before continuing. The <code>before</code> pause MUST be performed before the Action
while the <code>after</code> MUST be performed afterwards.</p>
<p>When a Action references another Action in the Experiment, the Action MUST
declare a single property called <code>ref</code>.</p>
<p>The <code>ref</code> property MUST be a JSON string which MUST be the name of a declared
Action.</p>
<p><a href="#controls">Controls</a> describe out-of-band capabilities applied during the
experiment&rsquo;s execution.</p>
<h3 id="action-or-probe-provider">Action or Probe Provider<a class="headerlink" href="#action-or-probe-provider" title="Permanent link">&para;</a></h3>
<p>A provider MUST be a JSON object which MUST declare a <code>type</code> property that
decides the other expected properties.</p>
<p>The <code>type</code> property MUST be one of <code>"python"</code>, <code>"http"</code> or <code>"process"</code>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This specification only mentions those three providers but it could grow
to <a href="https://github.com/chaostoolkit/chaostoolkit-lib/issues/38">support more</a>, such as <code>"go"</code>, <code>"rust"</code> or <code>"grpc"</code>&hellip;</p>
</div>
<h4 id="python-provider">Python Provider<a class="headerlink" href="#python-provider" title="Permanent link">&para;</a></h4>
<p>A Python Provider declares a Python function to be applied.</p>
<p>A Python Provider MUST declare the following:</p>
<ul>
<li>a <code>module</code> property</li>
<li>a <code>func</code> property</li>
</ul>
<p>It SHOULD also declare an <code>arguments</code> property when the function expects them.</p>
<p>The <code>module</code> property is the fully qualified module exposing the function. It
MUST be a JSON string.</p>
<p>The <code>func</code> property is the name of the function to apply. It MUST be a JSON
string.</p>
<p>When provided, the <code>arguments</code> property MUST be a JSON object which
properties are the names of the <a href="https://docs.python.org/3/glossary.html#term-argument">function&rsquo;s arguments</a>. When a function&rsquo;s
signature has <a href="https://docs.python.org/3/reference/compound_stmts.html#function-definitions">default values</a> for some of its arguments, those MAY be
omitted from the <code>arguments</code> object. In that case, those default values will be
used.</p>
<p>Argument values MUST be valid JSON entities.</p>
<h4 id="http-provider">HTTP Provider<a class="headerlink" href="#http-provider" title="Permanent link">&para;</a></h4>
<p>A HTTP Provider declares a URL to be called.</p>
<p>A HTTP Provider MUST declare the following:</p>
<ul>
<li>a <code>url</code> property</li>
</ul>
<p>The <code>url</code> property MUST be a JSON string representing a URL as per
<a href="https://tools.ietf.org/html/rfc3986">RFC 3986</a>.</p>
<p>In addition, the <code>provider</code> object MAY declare any of the followings:</p>
<ul>
<li>a <code>method</code> property</li>
<li>a <code>headers</code> property</li>
<li>a <code>expected_status</code> property</li>
<li>a <code>arguments</code> property</li>
<li>a <code>timeout</code> property</li>
</ul>
<p>The <code>method</code> property MUST be a JSON string, such as <code>"POST"</code>, as per
<a href="https://tools.ietf.org/html/rfc7231">RFC 7231</a>. It defaults to <code>"GET"</code>.</p>
<p>The <code>headers</code> property MUST be a JSON object which properties are header names
and values are header values, as per <a href="https://tools.ietf.org/html/rfc7231">RFC 7231</a>.</p>
<p>When provided, the <code>arguments</code> property MUST be a JSON object which
properties are parameters of the HTTP request.</p>
<p>When <code>method</code> is <code>"GET"</code>, the <code>arguments</code> are mapped as a query-string of the
URL. Otherwise, the <code>arguments</code> are passed as the request body&rsquo;s data and the
encoding depends on the <code>"Content-Type"</code> provided in the <code>headers</code> object.</p>
<p>The <code>timeout</code> property MUST be either a JSON number specifying how long the
request should take to complete. Or a JSON array that MUST made of two JSON
numbers, the first one indicating the connection timeout, the second the
request timeout to respond.</p>
<p>The HTTP provider MUST return an object with the following properties:</p>
<ul>
<li><code>status</code> which MUST be a valid HTTP returned code as defined in
  <a href="https://tools.ietf.org/html/rfc7231">RFC 7231</a></li>
<li><code>headers</code> which MUST be an object</li>
<li><code>body</code> which MUST be a string</li>
</ul>
<h4 id="process-provider">Process Provider<a class="headerlink" href="#process-provider" title="Permanent link">&para;</a></h4>
<p>A Process Provider declares a process to be called.</p>
<p>A Process Provider MUST declare the following:</p>
<ul>
<li>a <code>path</code> property</li>
</ul>
<p>The <code>path</code> property MUST be a JSON string of a path to an executable.</p>
<p>In addition, the <code>provider</code> object MAY declare any of the followings:</p>
<ul>
<li>a <code>arguments</code> property</li>
<li>a <code>timeout</code> property</li>
</ul>
<p>The <code>arguments</code> property MUST be a JSON array which defines the process
arguments. Those arguments are passed in order to the process arguments.</p>
<p>The <code>timeout</code> property MUST be a JSON number specifying how long the process
should take to complete.</p>
<p>The Process provider MUST return an object with the following properties:</p>
<ul>
<li><code>status</code> which MUST be a scalar of the process return code</li>
<li><code>stdout</code> which MUST be bytes sequence encoded with the <code>UTF-8</code> encoding
  representing the stdout payload of the process</li>
<li><code>stderr</code> which MUST be bytes sequence encoded with the <code>UTF-8</code> encoding
  representing the stderr payload of the process</li>
</ul>
<h3 id="rollbacks">Rollbacks<a class="headerlink" href="#rollbacks" title="Permanent link">&para;</a></h3>
<p>Rollbacks declare the sequence of actions that attempt to put the system back
to its initial state.</p>
<p>The experiment MAY declare a single <code>rollbacks</code> property which is a JSON array
consisting of <a href="#action">Actions</a>.</p>
<p>A failed rollback MUST not bail the sequence of rollbacks.</p>
<h3 id="secrets">Secrets<a class="headerlink" href="#secrets" title="Permanent link">&para;</a></h3>
<p>Secrets declare values that need to be passed on to <a href="#action">Actions</a> or
<a href="#probe">Probes</a> in a secure manner.</p>
<p>The <code>secrets</code> property MUST be a JSON object. Its properties are identifiers
referenced by <a href="#action">Actions</a> and <a href="#probe">Probes</a>.</p>
<p>The value of each identifier is a JSON object which properties are the secrets
keys and the properties values are the secrets values.</p>
<p>Referenced secrets MUST be injected into probes and actions when they are
applied. Probes and actions MUST NOT modify the secrets.</p>
<p>Secrets MUST be passed a mapping of keys and values to probes and actions.</p>
<p>An example of a <code>secrets</code> element at the top-level:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kubernetes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;XYZ&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>This can then referenced from probes or actions:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;probe&quot;</span><span class="p">,</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="s2">&quot;kubernetes&quot;</span>
<span class="p">}</span>
</pre></div>

<h4 id="inline-secrets">Inline Secrets<a class="headerlink" href="#inline-secrets" title="Permanent link">&para;</a></h4>
<p>Secrets MAY be inlined in the <a href="#experiment">Experiment</a> directly.</p>
<h4 id="environment-secrets">Environment Secrets<a class="headerlink" href="#environment-secrets" title="Permanent link">&para;</a></h4>
<p>Secrets MAY be retrieved from the environment. In that case, they must be
declared as a JSON object with a <code>type</code> property set to <code>"env"</code>. The
environment variable MUST be declared in the <code>key</code> property as a JSON string.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;kubernetes&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;env&quot;</span><span class="p">,</span>
                <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;KUBERNETES_TOKEN&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h4 id="vault-secrets">Vault Secrets<a class="headerlink" href="#vault-secrets" title="Permanent link">&para;</a></h4>
<p>Secrets MAY be retrieved from a <a href="https://www.vaultproject.io/">HashiCorp vault instance</a>. In that case,
they must be declared as a JSON object with a <code>type</code> property set to <code>"vault"</code>.
The path to the key MUST be declared in the <code>path</code> property as a JSON
string.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vault&quot;</span><span class="p">,</span>
                <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;secrets/something&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>When only the <code>path</code> property is set, the whole secrets payload at the given
path MUST be set to the Chaos Toolkit secret key.</p>
<p>A <code>key</code> property MAY be set to select a specific value from the Vault secret
payload.</p>
<p>Vault authentication MUST at least support:</p>
<ul>
<li><a href="https://www.vaultproject.io/api/auth/token/index.html">token</a> based authentication
  The token MUST be provided in the Configuration section via the
  <code>"vault_token"</code> property</li>
<li><a href="https://www.vaultproject.io/api/auth/approle/index.html">AppRole</a> authentication
  The role-id and secret-id MUST be provided in the Configuration section vi
  the <code>"vault_role_id"</code> and <code>"vault_role_secret"</code> properties</li>
</ul>
<p>The Vault <a href="https://www.vaultproject.io/api/secret/kv/index.html">KV secrets version</a> MAY be provided via the
<code>"vault_kv_version"</code> Configuration key. If not provided, it MUST default to
<code>"2"</code>.</p>
<p>Examples:</p>
<p>Vault secret at path <code>secret/something</code>:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;foo&quot;</span><span class="p">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
    <span class="nt">&quot;baz&quot;</span><span class="p">:</span> <span class="s2">&quot;hello&quot;</span>
<span class="p">}</span>
</pre></div>

<p>Then in your Chaos Toolkit experiment:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vault&quot;</span><span class="p">,</span>
                <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;secrets/something&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>means the secrets will become:</p>
<div class="codehilite"><pre><span></span>&quot;myapp&quot;: {
    &quot;foo&quot;: &quot;bar&quot;,
    &quot;baz&quot;: &quot;hello&quot;
}
</pre></div>

<p>However:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;myapp&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;vault&quot;</span><span class="p">,</span>
                <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;secrets/something&quot;</span><span class="p">,</span>
                <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;foo&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>means the secrets will become:</p>
<div class="codehilite"><pre><span></span>&quot;myapp&quot;: &quot;bar&quot;
</pre></div>

<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h3>
<p>Configuration is meant to provide runtime values to <a href="#action">actions</a> and
<a href="#probe">probes</a>.</p>
<p>The <code>configuration</code> element MUST be a JSON object. The value of each property
MUST be a JSON string or object which properties are considered the
configuration lookup. Configuration must be passed to all Probes and actions
requiring it. Probes and actions MUST NOT modify the configuration.</p>
<p>Configurations MUST be passed a mapping of keys and values to probes and
actions.</p>
<p>An example of a <code>configuration</code> element at the top-level:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;configuration&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;some_service&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8080&quot;</span><span class="p">,</span>
        <span class="nt">&quot;vault_addr&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;env&quot;</span><span class="p">,</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;VAULT_ADDR&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h4 id="inline-configurations">Inline Configurations<a class="headerlink" href="#inline-configurations" title="Permanent link">&para;</a></h4>
<p>Configurations MAY be inlined in the <a href="#experiment">Experiment</a> directly.</p>
<h4 id="environment-configurations">Environment Configurations<a class="headerlink" href="#environment-configurations" title="Permanent link">&para;</a></h4>
<p>Configurations MAY be retrieved from the environment. In that case, they must be
declared as a JSON object with a <code>type</code> property set to <code>"env"</code>. The
environment variable MUST be declared in the <code>key</code> property as a JSON string.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;configuration&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;vault_address&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;env&quot;</span><span class="p">,</span>
            <span class="nt">&quot;key&quot;</span><span class="p">:</span> <span class="s2">&quot;VAULT_ADDR&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3 id="variable-substitution">Variable Substitution<a class="headerlink" href="#variable-substitution" title="Permanent link">&para;</a></h3>
<p>Probes and Actions argument values MAY be dynamically resolved at runtime. </p>
<p>Dynamic values MUST follow the syntax <code>${name}</code> where <code>name</code> is an identifier
declared in either the Configuration or Secrets sections. When <code>name</code> is
declared in both sections, the Configuration section MUST take precedence.</p>
<p>Dynamic values MUST be substituted before being passed to Probes or Actions.</p>
<p>Other values, such as the HTTP Probe url, MAY be substituted as well.</p>
<h3 id="controls">Controls<a class="headerlink" href="#controls" title="Permanent link">&para;</a></h3>
<p>Controls describe out-of-band capabilities applied when the experiment is
executed. Controls are used to declare operations that should be carried by
external tools.</p>
<p>Controls MAY be declared at each of the following levels:</p>
<ul>
<li>experiment</li>
<li>steady-state-hypothesis</li>
<li>activity</li>
</ul>
<p>Controls MUST be applied before and after each of those levels. Schematically,
this looks like this:</p>
<div class="codehilite"><pre><span></span>apply experiment control before experiment starts
start experiment
    apply steady state control before steady-state probes are started
        start steady-state processing
            apply activity control before each probe is applied
            run each probe
            apply activity control after each probe is applied
    apply steady state control after steady-state probes have completed
    apply steady state control before method activities are started
        start method processing
            apply activity control before each activity is applied
            run each activity
            apply activity control after each activity is applied
    apply steady state control after method activities have completed
    apply steady state control before rollback activities are started
        start rollback processing
            apply activity control before each activity is applied
            run each activity
            apply activity control after each activity is applied
    apply steady state control after rollback activities have completed
apply experiment control after experiment completes
</pre></div>

<p>Controls MAY be omitted anywhere and MUST NOT be applied at a level they
are not declared.</p>
<p>Controls MUST NOT fail the experiment&rsquo;s execution due to unforeseen conditions.</p>
<p>Controls are declared with the <code>controls</code> property which is set to a JSON
array.</p>
<p>An item of that array MUST be a control, which is a JSON object which MUST
have the following properties:</p>
<ul>
<li>a <code>name</code> property which MUST be a JSON string</li>
<li>a <code>provider</code> property MUST be a JSON object</li>
</ul>
<p>The <code>provider</code> object indicates which implementation of the control to use.
It MUST declare the following properties:</p>
<ul>
<li>a <code>type</code> JSON string which MUST be <code>"python"</code></li>
<li>a <code>module</code> JSON string when the <code>type</code> property is <code>"python"</code>. It MUST be a
  a Python module dotted path implementing the control interface</li>
</ul>
<p>A control object MAY also declare the following property:</p>
<ul>
<li>a <code>scope</code> property MUST be a JSON string</li>
<li><code>automatic</code>, a JSON boolean which MUST be <code>true</code> by default (when omitted)</li>
</ul>
<p>The <code>scope</code> value MUST be one of <code>"before"</code> or <code>"after"</code>. When the <code>scope</code>
property is omitted, the control MUST be applied before and after. When the
<code>scope</code> property is set, the control MUST be applied only on that scope.</p>
<p>When the <code>automatic</code> property is set to <code>false</code>, it MUST be understood that
the control cannot be applied anywhere but where it is declared.</p>
<p>Examples of Controls:</p>
<p>Just a generic declaration of a control at the top-level of the experiment:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;controls&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tracing&quot;</span><span class="p">,</span>
        <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaostracing.control&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<p>Another control by applied only as post-control:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;controls&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tracing&quot;</span><span class="p">,</span>
        <span class="nt">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span>
        <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaostracing.control&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<p>Finally, a top-level level control not applied anywhere else down the tree:</p>
<div class="codehilite"><pre><span></span><span class="s2">&quot;controls&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tracing&quot;</span><span class="p">,</span>
        <span class="nt">&quot;automatic&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaostracing.control&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>

<h3 id="extensions">Extensions<a class="headerlink" href="#extensions" title="Permanent link">&para;</a></h3>
<p>An Experiment MAY declare an <code>extensions</code> property which MUST be an array
of objects. Each object MUST declare a non-empty <code>name</code> property.</p>
<p>Extensions are used in two scenarios:</p>
<ul>
<li>future core features that need to be ironed out by the community first</li>
<li>vendor specific payload</li>
</ul>
<p>In both cases, their actual usage is runtime dependent, this specification
does not declare any meaning to an extension.</p>
<p>Below is an example of an Extension:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;extensions&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;vendorX&quot;</span><span class="p">,</span>
        <span class="nt">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>

<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<p>The following examples MUST NOT be considered normative.</p>
<h3 id="minimal-experiment">Minimal Experiment<a class="headerlink" href="#minimal-experiment" title="Permanent link">&para;</a></h3>
<p>Here is an example of the most minimal experiment:</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Moving a file from under our feet is forgivable&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Our application should re-create a file that was removed&quot;</span><span class="p">,</span>
    <span class="nt">&quot;contributions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;reliability&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
        <span class="nt">&quot;availability&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;steady-state-hypothesis&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;The file must be around first&quot;</span><span class="p">,</span>
        <span class="nt">&quot;probes&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;file-must-exist&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tolerance&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;os.path&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;exists&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;some/file&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;file-be-gone&quot;</span><span class="p">,</span>
            <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;os.path&quot;</span><span class="p">,</span>
                <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;remove&quot;</span><span class="p">,</span>
                <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;some/file&quot;</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;pauses&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;after&quot;</span><span class="p">:</span> <span class="mi">5</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;ref&quot;</span><span class="p">:</span> <span class="s2">&quot;file-must-exist&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>

<p>For reference, here is the YAML equivalent (which is not official but respects
the specification herein):</p>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Moving a file from under our feet is forgivable</span>
<span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Our application should re-create a file that was removed</span>
<span class="nt">contributions</span><span class="p">:</span>
  <span class="nt">reliability</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">high</span>
  <span class="nt">availability</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">high</span>
<span class="nt">steady-state-hypothesis</span><span class="p">:</span>
  <span class="nt">title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">The file must be around first</span>
  <span class="nt">probes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file-must-exist</span>
    <span class="nt">tolerance</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">provider</span><span class="p">:</span>
      <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">os.path</span>
      <span class="nt">func</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">exists</span>
      <span class="nt">arguments</span><span class="p">:</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">some/file</span>
<span class="nt">method</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">action</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file-be-gone</span>
  <span class="nt">provider</span><span class="p">:</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">os.path</span>
    <span class="nt">func</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">remove</span>
    <span class="nt">arguments</span><span class="p">:</span>
      <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">some/file</span>
  <span class="nt">pauses</span><span class="p">:</span>
    <span class="nt">after</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="p p-Indicator">-</span> <span class="nt">ref</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file-must-exist</span>
</pre></div>

<h3 id="more-complex-experiment">More Complex Experiment<a class="headerlink" href="#more-complex-experiment" title="Permanent link">&para;</a></h3>
<p>Below is an example of a fully featured experiment that uses various extensions
to perform actions, probing and steady-state hypothesis validation.</p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Are our users impacted by the loss of a function?&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;While users query the Astre function, they should not be impacted if one instance goes down.&quot;</span><span class="p">,</span>
    <span class="nt">&quot;contributions&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;reliability&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
        <span class="nt">&quot;availability&quot;</span><span class="p">:</span> <span class="s2">&quot;high&quot;</span><span class="p">,</span>
        <span class="nt">&quot;performance&quot;</span><span class="p">:</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span>
        <span class="nt">&quot;security&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;kubernetes&quot;</span><span class="p">,</span>
        <span class="s2">&quot;openfaas&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cloudnative&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;configuration&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;prometheus_base_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://demo.foo.bar&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;global&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;auth&quot;</span><span class="p">:</span> <span class="s2">&quot;Basic XYZ&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;controls&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tracing&quot;</span><span class="p">,</span>
            <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaostracing.control&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;steady-state-hypothesis&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Function is available&quot;</span><span class="p">,</span>
        <span class="nt">&quot;probes&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;probe&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;function-must-exist&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tolerance&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
                <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;faas&quot;</span><span class="p">],</span>
                    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://demo.foo.bar/system/function/astre&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;${auth}&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;probe&quot;</span><span class="p">,</span>
                <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;function-must-respond&quot;</span><span class="p">,</span>
                <span class="nt">&quot;tolerance&quot;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
                <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;timeout&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
                    <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;global&quot;</span><span class="p">],</span>
                    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://demo.foo.bar/function/astre&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;headers&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;${auth}&quot;</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Paris&quot;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;simulate-user-traffic&quot;</span><span class="p">,</span>
            <span class="nt">&quot;background&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;process&quot;</span><span class="p">,</span>
                <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;vegeta&quot;</span><span class="p">,</span>
                <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="s2">&quot;-cpus 2 attack -targets=data/scenario.txt -workers=2 -connections=1 -rate=3 -timeout=3s -duration=30s -output=result.bin&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;action&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;terminate-one-function&quot;</span><span class="p">,</span>
            <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaosk8s.pod.actions&quot;</span><span class="p">,</span>
                <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;terminate_pods&quot;</span><span class="p">,</span>
                <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;ns&quot;</span><span class="p">:</span> <span class="s2">&quot;openfaas-fn&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;label_selector&quot;</span><span class="p">:</span> <span class="s2">&quot;faas_function=astre&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;rand&quot;</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="nt">&quot;pauses&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;before&quot;</span><span class="p">:</span> <span class="mi">5</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;probe&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;fetch-openfaas-gateway-logs&quot;</span><span class="p">,</span>
            <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaosk8s.pod.probes&quot;</span><span class="p">,</span>
                <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;read_pod_logs&quot;</span><span class="p">,</span>
                <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;label_selector&quot;</span><span class="p">:</span> <span class="s2">&quot;app=gateway&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;last&quot;</span><span class="p">:</span> <span class="s2">&quot;35s&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;ns&quot;</span><span class="p">:</span> <span class="s2">&quot;openfaas&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;probe&quot;</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;query-total-function-invocation&quot;</span><span class="p">,</span>
            <span class="nt">&quot;provider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="nt">&quot;module&quot;</span><span class="p">:</span> <span class="s2">&quot;chaosprometheus.probes&quot;</span><span class="p">,</span>
                <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;query_interval&quot;</span><span class="p">,</span>
                <span class="nt">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;global&quot;</span><span class="p">],</span>
                <span class="nt">&quot;arguments&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;gateway_function_invocation_total{function_name=&#39;astre&#39;}&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;start&quot;</span><span class="p">:</span> <span class="s2">&quot;1 minute ago&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;end&quot;</span><span class="p">:</span> <span class="s2">&quot;now&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;step&quot;</span><span class="p">:</span> <span class="mi">1</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;rollbacks&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>

<p>The equivalent YAML serialization:</p>
<div class="codehilite"><pre><span></span><span class="nn">---</span>
<span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
<span class="nt">title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Are our users impacted by the loss of a function?</span>
<span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">While users query the Astre function, they should not be impacted if</span>
  <span class="l l-Scalar l-Scalar-Plain">one instance goes down.</span>
<span class="nt">contributions</span><span class="p">:</span>
  <span class="nt">reliability</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">high</span>
  <span class="nt">availability</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">high</span>
  <span class="nt">performance</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">medium</span>
  <span class="nt">security</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">none</span>
<span class="nt">tags</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">kubernetes</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">openfaas</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">cloudnative</span>
<span class="nt">configuration</span><span class="p">:</span>
  <span class="nt">prometheus_base_url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://demo.foo.bar</span>
<span class="nt">secrets</span><span class="p">:</span>
  <span class="nt">global</span><span class="p">:</span>
    <span class="nt">auth</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Basic XYZ</span>
<span class="nt">controls</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tracing</span>
  <span class="nt">provider</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">chaostracing.control</span>
<span class="nt">steady-state-hypothesis</span><span class="p">:</span>
  <span class="nt">title</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Function is available</span>
  <span class="nt">probes</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">probe</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">function-must-exist</span>
    <span class="nt">tolerance</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
    <span class="nt">provider</span><span class="p">:</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http</span>
      <span class="nt">secrets</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">faas</span>
      <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://demo.foo.bar/system/function/astre</span>
      <span class="nt">headers</span><span class="p">:</span>
        <span class="nt">Authorization</span><span class="p">:</span> <span class="s">&quot;${auth}&quot;</span>
  <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">probe</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">function-must-respond</span>
    <span class="nt">tolerance</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
    <span class="nt">provider</span><span class="p">:</span>
      <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http</span>
      <span class="nt">timeout</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
      <span class="nt">secrets</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">global</span>
      <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://demo.foo.bar/function/astre</span>
      <span class="nt">method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">POST</span>
      <span class="nt">headers</span><span class="p">:</span>
        <span class="nt">Content-Type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">application/json</span>
        <span class="nt">Authorization</span><span class="p">:</span> <span class="s">&quot;${auth}&quot;</span>
      <span class="nt">arguments</span><span class="p">:</span>
        <span class="nt">city</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Paris</span>
<span class="nt">method</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">action</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">simulate-user-traffic</span>
  <span class="nt">background</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">provider</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">process</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vegeta</span>
    <span class="nt">arguments</span><span class="p">:</span> <span class="s">&quot;-cpus</span><span class="nv"> </span><span class="s">2</span><span class="nv"> </span><span class="s">attack</span><span class="nv"> </span><span class="s">-targets=data/scenario.txt</span><span class="nv"> </span><span class="s">-workers=2</span><span class="nv"> </span><span class="s">-connections=1</span>
      <span class="s">-rate=3</span><span class="nv"> </span><span class="s">-timeout=3s</span><span class="nv"> </span><span class="s">-duration=30s</span><span class="nv"> </span><span class="s">-output=result.bin&quot;</span>
<span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">action</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">terminate-one-function</span>
  <span class="nt">provider</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">chaosk8s.pod.actions</span>
    <span class="nt">func</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">terminate_pods</span>
    <span class="nt">arguments</span><span class="p">:</span>
      <span class="nt">ns</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openfaas-fn</span>
      <span class="nt">label_selector</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">faas_function=astre</span>
      <span class="nt">rand</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class="nt">pauses</span><span class="p">:</span>
    <span class="nt">before</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">probe</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">fetch-openfaas-gateway-logs</span>
  <span class="nt">provider</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">chaosk8s.pod.probes</span>
    <span class="nt">func</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">read_pod_logs</span>
    <span class="nt">arguments</span><span class="p">:</span>
      <span class="nt">label_selector</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">app=gateway</span>
      <span class="nt">last</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">35s</span>
      <span class="nt">ns</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openfaas</span>
<span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">probe</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">query-total-function-invocation</span>
  <span class="nt">provider</span><span class="p">:</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">python</span>
    <span class="nt">module</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">chaosprometheus.probes</span>
    <span class="nt">func</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">query_interval</span>
    <span class="nt">secrets</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">global</span>
    <span class="nt">arguments</span><span class="p">:</span>
      <span class="nt">query</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gateway_function_invocation_total{function_name=&#39;astre&#39;}</span>
      <span class="nt">start</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1 minute ago</span>
      <span class="nt">end</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">now</span>
      <span class="nt">step</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">rollbacks</span><span class="p">:</span> <span class="p p-Indicator">[]</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../concepts/" title="Concepts" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Concepts
              </span>
            </div>
          </a>
        
        
          <a href="../journal/" title="Journal" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Journal
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2017-2018 chaostoolkit team
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/chaostoolkit" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/chaostoolkit" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://join.chaostoolkit.org/" class="md-footer-social__link fa fa-slack"></a>
    
      <a href="https://medium.com/chaos-toolkit" class="md-footer-social__link fa fa-medium"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>