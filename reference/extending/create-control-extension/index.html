<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Chaos Toolkit"><meta name=author content="The Chaos Toolkit Team"><link href=https://chaostoolkit.org/reference/extending/create-control-extension/ rel=canonical><link rel=icon href=../../../static/images/favicon.ico><meta name=generator content="mkdocs-1.3.0, mkdocs-material-8.3.9"><title>Create Control -</title><link rel=stylesheet href=../../../assets/stylesheets/main.1d29e8d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#ffffff><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../static/css/extra.css><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-110478437-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=white data-md-color-accent=yellow> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#create-a-control-extension class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title class="md-header__button md-logo" aria-label data-md-component=logo> <img src=../../../static/images/chaos-toolkit-full.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Create Control </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/chaostoolkit/chaostoolkit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> chaostoolkit </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../usage/install/ class=md-tabs__link> Get Started </a> </li> <li class=md-tabs__item> <a href=../../tutorial/ class=md-tabs__link> Guides </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class="md-tabs__link md-tabs__link--active"> Reference </a> </li> <li class=md-tabs__item> <a href=../../contributing/ class=md-tabs__link> Contribute </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title class="md-nav__button md-logo" aria-label data-md-component=logo> <img src=../../../static/images/chaos-toolkit-full.svg alt=logo> </a> </label> <div class=md-nav__source> <a href=https://github.com/chaostoolkit/chaostoolkit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> chaostoolkit </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Get Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Get Started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Get Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/install/ class=md-nav__link> Install </a> </li> <li class=md-nav__item> <a href=../../usage/upgrade/ class=md-nav__link> Upgrade </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> CLI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CLI data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/cli/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../usage/discover/ class=md-nav__link> Discover </a> </li> <li class=md-nav__item> <a href=../../usage/init/ class=md-nav__link> Init </a> </li> <li class=md-nav__item> <a href=../../usage/run/ class=md-nav__link> Run </a> </li> <li class=md-nav__item> <a href=../../usage/report/ class=md-nav__link> Report </a> </li> <li class=md-nav__item> <a href=../../usage/scheduling/ class=md-nav__link> Schedule </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorial/ class=md-nav__link> Get Started with the Chaos Toolkit </a> </li> <li class=md-nav__item> <a href=../../walkthrough/ class=md-nav__link> Chaos Toolkit Labs </a> </li> <li class=md-nav__item> <a href=../../tutorials/authoring_operating/ class=md-nav__link> Author and Operator </a> </li> <li class=md-nav__item> <a href=../../tutorials/run-flow/ class=md-nav__link> Understand the Execution Flow </a> </li> <li class=md-nav__item> <a href=../../tutorials/tolerance/ class=md-nav__link> Learn all about Steady-State Tolerances </a> </li> <li class=md-nav__item> <a href=../../tutorials/extend/ class=md-nav__link> An overview of extending the Chaos Toolkit </a> </li> <li class=md-nav__item> <a href=../../tutorials/blockchain/ class=md-nav__link> Experimenting against a blockchain </a> </li> <li class=md-nav__item> <a href=../../tutorials/containerising/ class=md-nav__link> Containerising Chaos Toolkit </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Running Chaos Toolkit in AWS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Running Chaos Toolkit in AWS" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Running Chaos Toolkit in AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/ec2/ class=md-nav__link> Running Chaos Toolkit from an EC2 instance </a> </li> <li class=md-nav__item> <a href=../../tutorials/batch/ class=md-nav__link> Running Chaos Toolkit experiments as AWS Batch Jobs </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=API data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/ class=md-nav__link> Concepts </a> </li> <li class=md-nav__item> <a href=../../api/experiment/ class=md-nav__link> Experiment </a> </li> <li class=md-nav__item> <a href=../../api/journal/ class=md-nav__link> Journal </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> CLI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CLI data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/cli/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../usage/discover/ class=md-nav__link> Discover </a> </li> <li class=md-nav__item> <a href=../../usage/init/ class=md-nav__link> Init </a> </li> <li class=md-nav__item> <a href=../../usage/run/ class=md-nav__link> Run </a> </li> <li class=md-nav__item> <a href=../../usage/report/ class=md-nav__link> Report </a> </li> <li class=md-nav__item> <a href=../../usage/scheduling/ class=md-nav__link> Schedule </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Extensions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Extensions data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> Infrastructure/Platform <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure/Platform data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Infrastructure/Platform </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/aws/ class=md-nav__link> AWS </a> </li> <li class=md-nav__item> <a href=../../../drivers/ansible/ class=md-nav__link> Ansible </a> </li> <li class=md-nav__item> <a href=../../../drivers/azure/ class=md-nav__link> Azure </a> </li> <li class=md-nav__item> <a href=../../../drivers/cloudfoundry/ class=md-nav__link> Cloud Foundry </a> </li> <li class=md-nav__item> <a href=../../../drivers/gandi/ class=md-nav__link> Gandi </a> </li> <li class=md-nav__item> <a href=../../../drivers/gcp/ class=md-nav__link> Google Cloud Platform </a> </li> <li class=md-nav__item> <a href=../../../drivers/kubernetes/ class=md-nav__link> Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../drivers/service-fabric/ class=md-nav__link> Service Fabric </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> Application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Application data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> Application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/spring/ class=md-nav__link> Spring </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> Network <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Network data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> Network </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/toxiproxy/ class=md-nav__link> ToxiProxy </a> </li> <li class=md-nav__item> <a href=../../../drivers/istio/ class=md-nav__link> Istio </a> </li> <li class=md-nav__item> <a href=../../../drivers/wiremock/ class=md-nav__link> WireMock </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Load Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Load Testing" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Load Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/k6/ class=md-nav__link> k6 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_6 type=checkbox id=__nav_4_3_6> <label class=md-nav__link for=__nav_4_3_6> Notification <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Notification data-md-level=3> <label class=md-nav__title for=__nav_4_3_6> <span class="md-nav__icon md-icon"></span> Notification </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/slack/ class=md-nav__link> Slack </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_7 type=checkbox id=__nav_4_3_7> <label class=md-nav__link for=__nav_4_3_7> Observability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Observability data-md-level=3> <label class=md-nav__title for=__nav_4_3_7> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/dynatrace/ class=md-nav__link> Dynatrace </a> </li> <li class=md-nav__item> <a href=../../../drivers/grafana/ class=md-nav__link> Grafana </a> </li> <li class=md-nav__item> <a href=../../../drivers/humio/ class=md-nav__link> Humio </a> </li> <li class=md-nav__item> <a href=../../../drivers/opentracing/ class=md-nav__link> Open Tracing/OpenTelemetry </a> </li> <li class=md-nav__item> <a href=../../../drivers/prometheus/ class=md-nav__link> Prometheus </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_8 type=checkbox id=__nav_4_3_8> <label class=md-nav__link for=__nav_4_3_8> Reliability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reliability data-md-level=3> <label class=md-nav__title for=__nav_4_3_8> <span class="md-nav__icon md-icon"></span> Reliability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/reliably/ class=md-nav__link> Reliably </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_9 type=checkbox id=__nav_4_3_9> <label class=md-nav__link for=__nav_4_3_9> Addons <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Addons data-md-level=3> <label class=md-nav__title for=__nav_4_3_9> <span class="md-nav__icon md-icon"></span> Addons </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/addons/ class=md-nav__link> Common </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_1 type=checkbox id=__nav_4_4_1> <label class=md-nav__link for=__nav_4_4_1> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=3> <label class=md-nav__title for=__nav_4_4_1> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deployment/k8s/operator/ class=md-nav__link> Operator </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5 checked> <label class=md-nav__link for=__nav_4_5> Develop <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Develop data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Develop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developing/guidelines/ class=md-nav__link> Guidelines </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Driver Extension <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Driver Extension" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Driver Extension </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../approaches/ class=md-nav__link> Extension Approaches </a> </li> <li class=md-nav__item> <a href=../extending-with-python/ class=md-nav__link> Extend with Python </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3 checked> <label class=md-nav__link for=__nav_4_5_3> Control Extension <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Control Extension" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Control Extension </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Create Control <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Create Control </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#controls-interface class=md-nav__link> Controls Interface </a> </li> <li class=md-nav__item> <a href=#use-your-control class=md-nav__link> Use your control </a> <nav class=md-nav aria-label="Use your control"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#declare-it-in-the-experiment class=md-nav__link> Declare it in the experiment </a> </li> <li class=md-nav__item> <a href=#declare-it-in-your-settings class=md-nav__link> Declare it in your settings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#things-to-note class=md-nav__link> Things to note </a> <nav class=md-nav aria-label="Things to note"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unforeseen-errors class=md-nav__link> Unforeseen errors </a> </li> <li class=md-nav__item> <a href=#interrupting-the-execution class=md-nav__link> Interrupting the execution </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Contribute <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contribute data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Contribute </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> Contributing to the Chaos Toolkit </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Project Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Project Management" data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Project Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developing/values/ class=md-nav__link> Key Project Values </a> </li> <li class=md-nav__item> <a href=../../developing/core/ class=md-nav__link> Core Projects </a> </li> <li class=md-nav__item> <a href=../../developing/extensions/ class=md-nav__link> Extensions Projects </a> </li> <li class=md-nav__item> <a href=../../developing/technologies/ class=md-nav__link> Technology Choices </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Resources data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../resources/logos/ class=md-nav__link> Logos </a> </li> <li class=md-nav__item> <a href=../../../resources/slides/ class=md-nav__link> Slides </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#controls-interface class=md-nav__link> Controls Interface </a> </li> <li class=md-nav__item> <a href=#use-your-control class=md-nav__link> Use your control </a> <nav class=md-nav aria-label="Use your control"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#declare-it-in-the-experiment class=md-nav__link> Declare it in the experiment </a> </li> <li class=md-nav__item> <a href=#declare-it-in-your-settings class=md-nav__link> Declare it in your settings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#things-to-note class=md-nav__link> Things to note </a> <nav class=md-nav aria-label="Things to note"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#unforeseen-errors class=md-nav__link> Unforeseen errors </a> </li> <li class=md-nav__item> <a href=#interrupting-the-execution class=md-nav__link> Interrupting the execution </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=create-a-control-extension>Create a Control Extension<a class=headerlink href=#create-a-control-extension title="Permanent link">&para;</a></h1> <p>A control extension implements the interface defined by the Chaos Toolkit to support the <a href=../../api/experiment/#controls>Controls element of the specification</a>.</p> <p>Controls are good for changing the experiment or its environment during execution. They have the power to impact the experiment, configuration, secrets on the fly, which is unlike probes and actions.</p> <h2 id=controls-interface>Controls Interface<a class=headerlink href=#controls-interface title="Permanent link">&para;</a></h2> <p>When implementing a control module, you must simply define a set of functions that are called by the Chaos Toolkit when executing the experiment.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>All of these functions are optional, only implement the one you need.</p> </div> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span>

<span class=kn>from</span> <span class=nn>chaoslib.types</span> <span class=kn>import</span> <span class=n>Activity</span><span class=p>,</span> <span class=n>Configuration</span><span class=p>,</span> \
    <span class=n>Experiment</span><span class=p>,</span> <span class=n>Hypothesis</span><span class=p>,</span> <span class=n>Journal</span><span class=p>,</span> <span class=n>Run</span><span class=p>,</span> <span class=n>Secrets</span><span class=p>,</span> <span class=n>Settings</span>


<span class=k>def</span> <span class=nf>configure_control</span><span class=p>(</span><span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                      <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=n>settings</span><span class=p>:</span> <span class=n>Settings</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                      <span class=n>experiment</span><span class=p>:</span> <span class=n>Experiment</span> <span class=o>=</span> <span class=kc>None</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Configure the control&#39;s global state</span>

<span class=sd>    This is called once only per Chaos Toolkit&#39;s run and should be used to</span>
<span class=sd>    initialize any state your control may require.</span>

<span class=sd>    The `settings` are only passed when the control is declared in the</span>
<span class=sd>    settings file of the Chaos Toolkit.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>cleanup_control</span><span class=p>():</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Cleanup the control&#39;s global state</span>

<span class=sd>    Called once only during the experiment&#39;s execution.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>before_loading_experiment_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    before loading the experiment from its source.</span>

<span class=sd>    The context is the file path or URL given to the loader. Use this loader</span>
<span class=sd>    if you want to interact with that source before it is loaded.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>after_loading_experiment_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    after loading the experiment from its source.</span>

<span class=sd>    Use this loader if you want to interact with the experiment once it&#39;s been</span>
<span class=sd>    loaded and parsed but before the validation or execution take place.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>before_experiment_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span>
                              <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                              <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    before-control of the experiment&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit before the experiment&#39;s begin but after the</span>
<span class=sd>    configuration and secrets have been loaded.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>after_experiment_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>Journal</span><span class=p>,</span> 
                             <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                             <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    after-control of the experiment&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit after the experiment&#39;s completed. It passes the</span>
<span class=sd>    journal of the execution. At that stage, the after control has no influence</span>
<span class=sd>    over the execution however. Please see</span>
<span class=sd>    https://docs.chaostoolkit.org/reference/api/journal/#journal-elements</span>
<span class=sd>    for more information about the journal.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>before_hypothesis_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Hypothesis</span><span class=p>,</span>
                              <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                              <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    before-control of the hypothesis&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit before the steady-state hypothesis is</span>
<span class=sd>    applied.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>after_hypothesis_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Hypothesis</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
                             <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                             <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    after-control of the hypothesis&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit after the steady-state hypothesis is</span>
<span class=sd>    complete. The `state` contains the result of the hypothesis. Refer to</span>
<span class=sd>    https://docs.chaostoolkit.org/reference/api/journal/#steady-state-outcomes</span>
<span class=sd>    for the description of that state.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>before_method_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span> 
                          <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                          <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    before-control of the method&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit before the activities of the method are</span>
<span class=sd>    applied.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>after_method_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Run</span><span class=p>],</span> 
                         <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                         <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    after-control of the method&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit after the activities of the method have been</span>
<span class=sd>    applied. The `state` is the list of activity results. See</span>
<span class=sd>    https://docs.chaostoolkit.org/reference/api/journal/#run for more</span>
<span class=sd>    information.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>before_rollback_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span> 
                            <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                            <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    before-control of the rollback&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit before the actions of the rollback are</span>
<span class=sd>    applied.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>after_rollback_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Experiment</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Run</span><span class=p>],</span> 
                           <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                           <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    after-control of the rollback&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit after the actions of the rollback have been</span>
<span class=sd>    applied. The `state` is the list of actions results. See</span>
<span class=sd>    https://docs.chaostoolkit.org/reference/api/journal/#run for more</span>
<span class=sd>    information.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>before_activity_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Activity</span><span class=p>,</span> 
                            <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                            <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    before-control of the activity&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit before the activity is applied.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>


<span class=k>def</span> <span class=nf>after_activity_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Activity</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>Run</span><span class=p>,</span>  
                           <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                           <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    after-control of the activity&#39;s execution</span>

<span class=sd>    Called by the Chaos Toolkit before the activity is applied. The result of</span>
<span class=sd>    the execution is passed as `state`. See</span>
<span class=sd>    https://docs.chaostoolkit.org/reference/api/journal/#run for more</span>
<span class=sd>    information.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div> <h2 id=use-your-control>Use your control<a class=headerlink href=#use-your-control title="Permanent link">&para;</a></h2> <p>Define those functions into a module that is used as a provider. For instance, assume the above definition is stored into a module <code>chaosstuff.control</code>, in other words a <code>control.py</code> module of the <code>chaosstuff</code> package.</p> <p>The package must obviously be available to the <code>PYTHONPATH</code> in which the <code>chaos</code> runs.</p> <h3 id=declare-it-in-the-experiment>Declare it in the experiment<a class=headerlink href=#declare-it-in-the-experiment title="Permanent link">&para;</a></h3> <p>Controls can be applied per-experiment only:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>JSON</label><label for=__tabbed_1_2>YAML</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nt>&quot;controls&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>    </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;my-stuff&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nt>&quot;provider&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;python&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nt>&quot;module&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;chaosstuff.control&quot;</span><span class=w></span>
<span class=w>        </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>]</span><span class=w></span>
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=nt>controls</span><span class=p>:</span><span class=w></span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-stuff</span><span class=w></span>
<span class=w>    </span><span class=nt>provider</span><span class=p>:</span><span class=w></span>
<span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class=w></span>
<span class=w>      </span><span class=nt>module</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chaosstuff.control</span><span class=w></span>
</code></pre></div> </div> </div> </div> <h3 id=declare-it-in-your-settings>Declare it in your settings<a class=headerlink href=#declare-it-in-your-settings title="Permanent link">&para;</a></h3> <p>Controls can be also applied globally to all runs by declaring them in the Chaos Toolkit settings file:</p> <div class=highlight><pre><span></span><code><span class=nt>controls</span><span class=p>:</span><span class=w></span>
<span class=w>    </span><span class=nt>my-stuff</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>provider</span><span class=p>:</span><span class=w></span>
<span class=w>            </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">python</span><span class=w></span>
<span class=w>            </span><span class=nt>module</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">chaosstuff.control</span><span class=w></span>
</code></pre></div> <h2 id=things-to-note>Things to note<a class=headerlink href=#things-to-note title="Permanent link">&para;</a></h2> <h3 id=unforeseen-errors>Unforeseen errors<a class=headerlink href=#unforeseen-errors title="Permanent link">&para;</a></h3> <p>The Chaos Toolkit will not let a control abort the execution of the experiment. So if an exception is raised, it will be caught by the Chaos Toolkit, logged and the execution will carry on.</p> <h3 id=interrupting-the-execution>Interrupting the execution<a class=headerlink href=#interrupting-the-execution title="Permanent link">&para;</a></h3> <p>While unforeseen errors in your controls cannot stop the execution, you can interrupt the execution by raising <code>chaoslib.exceptions.InterruptExecution</code> from any of your control functions.</p> <p>Note however, this is a harsh way to terminate the execution since, none of the rollbacks will be applied.</p> <p>Here is an example:</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>chaoslib.exceptions</span> <span class=kn>import</span> <span class=n>InterruptExecution</span>


<span class=k>def</span> <span class=nf>after_activity_control</span><span class=p>(</span><span class=n>context</span><span class=p>:</span> <span class=n>Activity</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>Run</span><span class=p>,</span>  
                           <span class=n>configuration</span><span class=p>:</span> <span class=n>Configuration</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
                           <span class=n>secrets</span><span class=p>:</span> <span class=n>Secrets</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
    <span class=k>if</span> <span class=n>check_stuff</span><span class=p>(</span><span class=n>state</span><span class=p>[</span><span class=s2>&quot;output&quot;</span><span class=p>]):</span>
        <span class=k>raise</span> <span class=n>InterruptExecution</span><span class=p>(</span><span class=s2>&quot;Well things went really bad!&quot;</span><span class=p>)</span>
</code></pre></div> <p>In that case, the experiment&rsquo;s execution will have its <code>status</code> set to <code>"interrupted"</code> as described <a href=../../api/journal/#required-properties>here</a>.</p> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../extending-with-python/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Extend with Python" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Extend with Python </div> </div> </a> <a href=../../contributing/ class="md-footer__link md-footer__link--next" aria-label="Next: Contributing to the Chaos Toolkit" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Contributing to the Chaos Toolkit </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> &copy; 2017-2022 Chaos Toolkit team </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/chaostoolkit target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/chaostoolkit target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://join.chaostoolkit.org/ target=_blank rel=noopener title=join.chaostoolkit.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> <a href=https://medium.com/chaos-toolkit target=_blank rel=noopener title=medium.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262Zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.suggest"], "search": "../../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.6c7ad80a.min.js></script> </body> </html>