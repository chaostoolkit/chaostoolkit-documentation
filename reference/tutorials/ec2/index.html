<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Chaos Toolkit"><meta name=author content="The Chaos Toolkit Team"><link href=https://chaostoolkit.org/reference/tutorials/ec2/ rel=canonical><link rel=icon href=../../../static/images/favicon.ico><meta name=generator content="mkdocs-1.2.2, mkdocs-material-7.2.6"><title>Running Chaos Toolkit from an EC2 instance -</title><link rel=stylesheet href=../../../assets/stylesheets/main.802231af.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.3f5d1f46.min.css><meta name=theme-color content=#ffffff><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../../static/css/extra.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=white data-md-color-accent=yellow> <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#running-chaos-toolkit-from-an-ec2-instance class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title class="md-header__button md-logo" aria-label data-md-component=logo> <img src=../../../static/images/chaos-toolkit-full.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Running Chaos Toolkit from an EC2 instance </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/chaostoolkit/chaostoolkit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> chaostoolkit </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../usage/install/ class=md-tabs__link> Get Started </a> </li> <li class=md-tabs__item> <a href=../../tutorial/ class="md-tabs__link md-tabs__link--active"> Guides </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../contributing/ class=md-tabs__link> Contribute </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title class="md-nav__button md-logo" aria-label data-md-component=logo> <img src=../../../static/images/chaos-toolkit-full.svg alt=logo> </a> </label> <div class=md-nav__source> <a href=https://github.com/chaostoolkit/chaostoolkit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> chaostoolkit </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Get Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Get Started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Get Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/install/ class=md-nav__link> Install </a> </li> <li class=md-nav__item> <a href=../../usage/upgrade/ class=md-nav__link> Upgrade </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2_3 type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3> CLI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CLI data-md-level=2> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/cli/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../usage/discover/ class=md-nav__link> Discover </a> </li> <li class=md-nav__item> <a href=../../usage/init/ class=md-nav__link> Init </a> </li> <li class=md-nav__item> <a href=../../usage/run/ class=md-nav__link> Run </a> </li> <li class=md-nav__item> <a href=../../usage/report/ class=md-nav__link> Report </a> </li> <li class=md-nav__item> <a href=../../usage/notification/ class=md-nav__link> Notifications </a> </li> <li class=md-nav__item> <a href=../../usage/scheduling/ class=md-nav__link> Schedule </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Guides <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Guides data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Guides </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorial/ class=md-nav__link> Get Started with the Chaos Toolkit </a> </li> <li class=md-nav__item> <a href=../authoring_operating/ class=md-nav__link> Author and Operator </a> </li> <li class=md-nav__item> <a href=../run-flow/ class=md-nav__link> Understand the Execution Flow </a> </li> <li class=md-nav__item> <a href=../tolerance/ class=md-nav__link> Learn all about Steady-State Tolerances </a> </li> <li class=md-nav__item> <a href=../extend/ class=md-nav__link> An overview of extending the Chaos Toolkit </a> </li> <li class=md-nav__item> <a href=../blockchain/ class=md-nav__link> Experimenting against a blockchain </a> </li> <li class=md-nav__item> <a href=../containerising/ class=md-nav__link> Containerising Chaos Toolkit </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8 checked> <label class=md-nav__link for=__nav_3_8> Running Chaos Toolkit in AWS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Running Chaos Toolkit in AWS" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Running Chaos Toolkit in AWS </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Running Chaos Toolkit from an EC2 instance <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Running Chaos Toolkit from an EC2 instance </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#why-ec2 class=md-nav__link> Why EC2? </a> </li> <li class=md-nav__item> <a href=#the-steps class=md-nav__link> The Steps </a> <nav class=md-nav aria-label="The Steps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-create-your-instance class=md-nav__link> 1. Create your instance </a> </li> <li class=md-nav__item> <a href=#2-connect-to-your-instance class=md-nav__link> 2. Connect to your instance </a> </li> <li class=md-nav__item> <a href=#3-setup-chaos-toolkit class=md-nav__link> 3. Setup Chaos Toolkit </a> </li> <li class=md-nav__item> <a href=#4-create-an-experiment class=md-nav__link> 4. Create an experiment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> Summary </a> <nav class=md-nav aria-label=Summary> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notes class=md-nav__link> Notes </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../batch/ class=md-nav__link> Running Chaos Toolkit experiments as AWS Batch Jobs </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_1 type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1> API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=API data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/ class=md-nav__link> Concepts </a> </li> <li class=md-nav__item> <a href=../../api/experiment/ class=md-nav__link> Experiment </a> </li> <li class=md-nav__item> <a href=../../api/journal/ class=md-nav__link> Journal </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_2 type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2> CLI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CLI data-md-level=2> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../usage/cli/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../usage/discover/ class=md-nav__link> Discover </a> </li> <li class=md-nav__item> <a href=../../usage/init/ class=md-nav__link> Init </a> </li> <li class=md-nav__item> <a href=../../usage/run/ class=md-nav__link> Run </a> </li> <li class=md-nav__item> <a href=../../usage/report/ class=md-nav__link> Report </a> </li> <li class=md-nav__item> <a href=../../usage/notification/ class=md-nav__link> Notifications </a> </li> <li class=md-nav__item> <a href=../../usage/scheduling/ class=md-nav__link> Schedule </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3 type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3> Extensions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Extensions data-md-level=2> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/overview/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_2 type=checkbox id=__nav_4_3_2> <label class=md-nav__link for=__nav_4_3_2> Infrastructure/Platform <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure/Platform data-md-level=3> <label class=md-nav__title for=__nav_4_3_2> <span class="md-nav__icon md-icon"></span> Infrastructure/Platform </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/aws/ class=md-nav__link> AWS </a> </li> <li class=md-nav__item> <a href=../../../drivers/ansible/ class=md-nav__link> Ansible </a> </li> <li class=md-nav__item> <a href=../../../drivers/azure/ class=md-nav__link> Azure </a> </li> <li class=md-nav__item> <a href=../../../drivers/cloudfoundry/ class=md-nav__link> Cloud Foundry </a> </li> <li class=md-nav__item> <a href=../../../drivers/gandi/ class=md-nav__link> Gandi </a> </li> <li class=md-nav__item> <a href=../../../drivers/gcp/ class=md-nav__link> Google Cloud Platform </a> </li> <li class=md-nav__item> <a href=../../../drivers/kubernetes/ class=md-nav__link> Kubernetes </a> </li> <li class=md-nav__item> <a href=../../../drivers/service-fabric/ class=md-nav__link> Service Fabric </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_3 type=checkbox id=__nav_4_3_3> <label class=md-nav__link for=__nav_4_3_3> Application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Application data-md-level=3> <label class=md-nav__title for=__nav_4_3_3> <span class="md-nav__icon md-icon"></span> Application </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/spring/ class=md-nav__link> Spring </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_4 type=checkbox id=__nav_4_3_4> <label class=md-nav__link for=__nav_4_3_4> Network <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Network data-md-level=3> <label class=md-nav__title for=__nav_4_3_4> <span class="md-nav__icon md-icon"></span> Network </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/toxiproxy/ class=md-nav__link> ToxiProxy </a> </li> <li class=md-nav__item> <a href=../../../drivers/istio/ class=md-nav__link> Istio </a> </li> <li class=md-nav__item> <a href=../../../drivers/wiremock/ class=md-nav__link> WireMock </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_5 type=checkbox id=__nav_4_3_5> <label class=md-nav__link for=__nav_4_3_5> Load Testing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Load Testing" data-md-level=3> <label class=md-nav__title for=__nav_4_3_5> <span class="md-nav__icon md-icon"></span> Load Testing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/k6/ class=md-nav__link> k6 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_6 type=checkbox id=__nav_4_3_6> <label class=md-nav__link for=__nav_4_3_6> Observability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Observability data-md-level=3> <label class=md-nav__title for=__nav_4_3_6> <span class="md-nav__icon md-icon"></span> Observability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/humio/ class=md-nav__link> Humio </a> </li> <li class=md-nav__item> <a href=../../../drivers/prometheus/ class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=../../../drivers/opentracing/ class=md-nav__link> Open Tracing </a> </li> <li class=md-nav__item> <a href=../../../drivers/dynatrace/ class=md-nav__link> Dynatrace </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_3_7 type=checkbox id=__nav_4_3_7> <label class=md-nav__link for=__nav_4_3_7> Reliability <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reliability data-md-level=3> <label class=md-nav__title for=__nav_4_3_7> <span class="md-nav__icon md-icon"></span> Reliability </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../drivers/reliably/ class=md-nav__link> Reliably </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4 type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=2> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_4_1 type=checkbox id=__nav_4_4_1> <label class=md-nav__link for=__nav_4_4_1> Kubernetes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Kubernetes data-md-level=3> <label class=md-nav__title for=__nav_4_4_1> <span class="md-nav__icon md-icon"></span> Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../deployment/k8s/operator/ class=md-nav__link> Operator </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5 type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5> Develop <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Develop data-md-level=2> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Develop </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developing/guidelines/ class=md-nav__link> Guidelines </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_2 type=checkbox id=__nav_4_5_2> <label class=md-nav__link for=__nav_4_5_2> Driver Extension <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Driver Extension" data-md-level=3> <label class=md-nav__title for=__nav_4_5_2> <span class="md-nav__icon md-icon"></span> Driver Extension </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../extending/approaches/ class=md-nav__link> Extension Approaches </a> </li> <li class=md-nav__item> <a href=../../extending/extending-with-python/ class=md-nav__link> Extend with Python </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4_5_3 type=checkbox id=__nav_4_5_3> <label class=md-nav__link for=__nav_4_5_3> Control Extension <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Control Extension" data-md-level=3> <label class=md-nav__title for=__nav_4_5_3> <span class="md-nav__icon md-icon"></span> Control Extension </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../extending/create-control-extension/ class=md-nav__link> Create Control </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Contribute <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Contribute data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Contribute </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> Contributing to the Chaos Toolkit </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_2 type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2> Project Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Project Management" data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Project Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developing/values/ class=md-nav__link> Key Project Values </a> </li> <li class=md-nav__item> <a href=../../developing/core/ class=md-nav__link> Core Projects </a> </li> <li class=md-nav__item> <a href=../../developing/extensions/ class=md-nav__link> Extensions Projects </a> </li> <li class=md-nav__item> <a href=../../developing/technologies/ class=md-nav__link> Technology Choices </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5_3 type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3> Resources <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Resources data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../resources/logos/ class=md-nav__link> Logos </a> </li> <li class=md-nav__item> <a href=../../../resources/slides/ class=md-nav__link> Slides </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#why-ec2 class=md-nav__link> Why EC2? </a> </li> <li class=md-nav__item> <a href=#the-steps class=md-nav__link> The Steps </a> <nav class=md-nav aria-label="The Steps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-create-your-instance class=md-nav__link> 1. Create your instance </a> </li> <li class=md-nav__item> <a href=#2-connect-to-your-instance class=md-nav__link> 2. Connect to your instance </a> </li> <li class=md-nav__item> <a href=#3-setup-chaos-toolkit class=md-nav__link> 3. Setup Chaos Toolkit </a> </li> <li class=md-nav__item> <a href=#4-create-an-experiment class=md-nav__link> 4. Create an experiment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> Summary </a> <nav class=md-nav aria-label=Summary> <ul class=md-nav__list> <li class=md-nav__item> <a href=#notes class=md-nav__link> Notes </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=running-chaos-toolkit-from-an-ec2-instance>Running Chaos Toolkit from an EC2 instance<a class=headerlink href=#running-chaos-toolkit-from-an-ec2-instance title="Permanent link">&para;</a></h1> <p>It is common when using AWS for hosting your infrastructure that you&rsquo;ll have strict security policies in place. These policies will usually only allow for internal traffic within AWS, amongst various other things. A question we&rsquo;re asked a lot is <code>can I run Chaos Toolkit from AWS, to run against AWS?</code>. The answer is simply, yes, you can.</p> <h2 id=why-ec2>Why EC2?<a class=headerlink href=#why-ec2 title="Permanent link">&para;</a></h2> <p>The reasons for providing a guide on running Chaos Toolkit from an EC2 instance are simple enough:</p> <ul> <li>Most AWS users are comfortable with EC2</li> <li>It is the most analogous service to running something on your own workstation</li> </ul> <h2 id=the-steps>The Steps<a class=headerlink href=#the-steps title="Permanent link">&para;</a></h2> <p>There are a few pre-requisites required to be able to follow this guide:</p> <ul> <li>You&rsquo;ll need access to the AWS Console (We&rsquo;re assuming you&rsquo;re comfortable here)<ul> <li>Or you&rsquo;ll need <a href=https://aws.amazon.com/cli/ >AWS CLI</a> installed and configured</li> </ul> </li> <li>You&rsquo;ll need to be able to create EC2 instances (Or have someone do this for you)</li> <li>You&rsquo;ll need to be able to create IAM Roles and Policies (Or have someone do this for you)</li> <li>You&rsquo;ll need to be able to use <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/session-manager.html>Systems Manager - Session Manager</a></li> </ul> <h3 id=1-create-your-instance>1. Create your instance<a class=headerlink href=#1-create-your-instance title="Permanent link">&para;</a></h3> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>AWS Console</label><div class=tabbed-content> <ul> <li>Navigate to the EC2 console and select <code>Launch Instance</code></li> <li>For this guide, we&rsquo;ll select the <code>Amazon Linux 2 AMI</code> at the top of the list</li> <li>For this guide, we&rsquo;ll select a <code>t2.micro</code> (But you can choose a larger one)</li> <li>Go onto <code>Configure Instance Details</code></li> <li>Select the VPC to deploy into via the <code>Network</code> dropdown</li> <li>Select the Subnet to deploy into via the <code>Subnet</code> dropdown</li> <li>To the right of <code>IAM role</code>, select <code>Create a new IAM role</code><ul> <li>Create an instance profile as per the <code>Creating an instance profile with minimal Session Manager permissions (console)</code> in this <a href=https://docs.aws.amazon.com/systems-manager/latest/userguide/getting-started-create-iam-instance-profile.html>Session Manager Documentation</a></li> <li>Go back to the EC2 wizard and select the newly created role in the dropdown (You may have to click the refresh button)</li> </ul> </li> <li>Go onto <code>Add Storage</code> - For now, the defaults will be fine</li> <li>Go onto <code>Add Tags</code> - We recommend at minimum, adding a tag <code>{"OWNER": "your-name"}</code></li> <li>Go onto <code>Configure Security Group</code></li> <li>Click the <code>X</code> to the right of the SSH rule, you won&rsquo;t need this</li> <li>Go onto <code>Review and Launch</code> - Select <code>Launch</code></li> <li>Select <code>Proceed without a key pair</code>, check the tickbox, and click <code>Launch Instances</code></li> </ul> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>AWS CLI</label><div class=tabbed-content> <p>To be able to connect to your instance via Session Manager, you&rsquo;ll first need to create a few IAM components.</p> <ul> <li> <p>Create a file named <code>assume-role.json</code> with the following contents: <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;Version&quot;</span><span class=p>:</span> <span class=s2>&quot;2012-10-17&quot;</span><span class=p>,</span>
    <span class=nt>&quot;Statement&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
        <span class=nt>&quot;Effect&quot;</span><span class=p>:</span> <span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
        <span class=nt>&quot;Principal&quot;</span><span class=p>:</span> <span class=p>{</span>
            <span class=nt>&quot;Service&quot;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&quot;ec2.amazonaws.com&quot;</span>
            <span class=p>]</span>
        <span class=p>},</span>
        <span class=nt>&quot;Action&quot;</span><span class=p>:</span> <span class=s2>&quot;sts:AssumeRole&quot;</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></div></p> </li> <li> <p>Create your instances IAM instance profile: <div class=highlight><pre><span></span><code><span class=go>aws iam create-instance-profile \</span>
<span class=go>    --instance-profile-name CTK-EC2-INSTANCE-PROFILE \</span>
<span class=go>    --no-cli-pager</span>
</code></pre></div></p> </li> <li> <p>Create your instances IAM role, replacing <code>YOUR_NAME</code> with your name: <div class=highlight><pre><span></span><code><span class=go>aws iam create-role \</span>
<span class=go>    --role-name CTK-EC2-ROLE \</span>
<span class=go>    --assume-role-policy-document file://assume-role.json \</span>
<span class=go>    --tags Key=OWNER,Value=YOUR_NAME \</span>
<span class=go>    --no-cli-pager</span>
</code></pre></div></p> </li> <li> <p>Create a file named <code>role-policy.json</code> with the following contents: <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;Version&quot;</span><span class=p>:</span> <span class=s2>&quot;2012-10-17&quot;</span><span class=p>,</span>
    <span class=nt>&quot;Statement&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
            <span class=nt>&quot;Effect&quot;</span><span class=p>:</span> <span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
            <span class=nt>&quot;Action&quot;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&quot;ssm:UpdateInstanceInformation&quot;</span><span class=p>,</span>
                <span class=s2>&quot;ssmmessages:CreateControlChannel&quot;</span><span class=p>,</span>
                <span class=s2>&quot;ssmmessages:CreateDataChannel&quot;</span><span class=p>,</span>
                <span class=s2>&quot;ssmmessages:OpenControlChannel&quot;</span><span class=p>,</span>
                <span class=s2>&quot;ssmmessages:OpenDataChannel&quot;</span>
            <span class=p>],</span>
            <span class=nt>&quot;Resource&quot;</span><span class=p>:</span> <span class=s2>&quot;*&quot;</span>
        <span class=p>},</span>
        <span class=p>{</span>
            <span class=nt>&quot;Effect&quot;</span><span class=p>:</span> <span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
            <span class=nt>&quot;Action&quot;</span><span class=p>:</span> <span class=p>[</span>
                <span class=s2>&quot;s3:GetEncryptionConfiguration&quot;</span>
            <span class=p>],</span>
            <span class=nt>&quot;Resource&quot;</span><span class=p>:</span> <span class=s2>&quot;*&quot;</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></div></p> </li> <li> <p>Create the policy, replacing <code>YOUR_NAME</code> with your name: <div class=highlight><pre><span></span><code><span class=go>aws iam create-policy \</span>
<span class=go>    --policy-name CTK-EC2-SESSION-MANAGER-POLICY \</span>
<span class=go>    --policy-document file://role-policy.json \</span>
<span class=go>    --tags Key=OWNER,Value=YOUR_NAME \</span>
<span class=go>    --no-cli-pager</span>
</code></pre></div></p> </li> <li> <p>Attach your policy to your role, replacing <code>AWS_ACCOUNT_ID</code> with your AWS account id: <div class=highlight><pre><span></span><code><span class=go>aws iam attach-role-policy \</span>
<span class=go>    --role-name CTK-EC2-ROLE \</span>
<span class=go>    --policy-arn arn:aws:iam::AWS_ACCOUNT_ID:policy/CTK-EC2-SESSION-MANAGER-POLICY \</span>
<span class=go>    --no-cli-pager</span>
</code></pre></div></p> </li> <li> <p>Attach your role to your instance profile: <div class=highlight><pre><span></span><code><span class=go>aws iam add-role-to-instance-profile \</span>
<span class=go>    --instance-profile-name CTK-EC2-INSTANCE-PROFILE \</span>
<span class=go>    --role-name CTK-EC2-ROLE \</span>
<span class=go>    --no-cli-pager</span>
</code></pre></div></p> </li> </ul> <p>Now that your instances IAM entities are sorted, you can create your instance.</p> <ul> <li>Create your instance, using the instance profile created earlier, replacing <code>YOUR_NAME</code> with your name: <div class=highlight><pre><span></span><code><span class=go>aws ec2 run-instances \</span>
<span class=go>    --image-id ami-0d26eb3972b7f8c96 \</span>
<span class=go>    --instance-type t2.micro \</span>
<span class=go>    --iam-instance-profile Name=CTK-EC2-INSTANCE-PROFILE \</span>
<span class=go>    --count 1 \</span>
<span class=go>    --tag-specifications &#39;ResourceType=instance,Tags=[{Key=OWNER,Value=YOUR_NAME}]&#39; \</span>
<span class=go>    --no-cli-pager</span>
</code></pre></div></li> </ul> </div> </div> <h3 id=2-connect-to-your-instance>2. Connect to your instance<a class=headerlink href=#2-connect-to-your-instance title="Permanent link">&para;</a></h3> <ul> <li>Navigate to the Systems Manager console and select <code>Session Manager</code></li> <li>Select <code>Start Session</code></li> <li>Select your instance from the <code>Target instances</code> table</li> <li>Select <code>Start session</code></li> <li>A new tab will open with a terminal session open in the browser</li> </ul> <h3 id=3-setup-chaos-toolkit>3. Setup Chaos Toolkit<a class=headerlink href=#3-setup-chaos-toolkit title="Permanent link">&para;</a></h3> <p>You&rsquo;ll see a prompt like:</p> <div class=highlight><pre><span></span><code><span class=gp>sh-4.2$</span>
</code></pre></div> <p>Change to the home directory with:</p> <div class=highlight><pre><span></span><code><span class=go>cd ~</span>
</code></pre></div> <p>Create a new directory for your experimentation and navigate inside:</p> <div class=highlight><pre><span></span><code><span class=go>mkdir my-experiments &amp;&amp; cd my-experiments</span>
</code></pre></div> <p>Create a virtual environment for the Chaos Toolkit dependencies:</p> <div class=highlight><pre><span></span><code><span class=go>python3 -m venv .venv &amp;&amp; source .venv/bin/activate &amp;&amp; python3 -m pip install --upgrade pip</span>
</code></pre></div> <p>Install <code>chaostoolkit</code> and its AWS extension <code>chaostoolkit-aws</code>:</p> <div class=highlight><pre><span></span><code><span class=go>pip3 install chaostoolkit chaostoolkit-aws</span>
</code></pre></div> <h3 id=4-create-an-experiment>4. Create an experiment<a class=headerlink href=#4-create-an-experiment title="Permanent link">&para;</a></h3> <p>For the purpose of this guide, we will just create an experiment with a Steady State Hypothesis that interrogates EC2 and checks that our <strong>current</strong> instance, is in the <code>running</code> state. We don&rsquo;t have a method, we&rsquo;re merely showing that we can talk to AWS from within AWS.</p> <p>Create a file named <code>experiment.json</code> with the following contents:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Running Chaos Toolkit from an EC2 instance&quot;</span><span class=p>,</span>
    <span class=nt>&quot;description&quot;</span><span class=p>:</span> <span class=s2>&quot;N/A&quot;</span><span class=p>,</span>
    <span class=nt>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[],</span>
    <span class=nt>&quot;steady-state-hypothesis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Current EC2 is RUNNING&quot;</span><span class=p>,</span>
        <span class=nt>&quot;probes&quot;</span><span class=p>:</span> <span class=p>[</span>
            <span class=p>{</span>
                <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;probe&quot;</span><span class=p>,</span>
                <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;instance_state&quot;</span><span class=p>,</span>
                <span class=nt>&quot;provider&quot;</span><span class=p>:</span> <span class=p>{</span>
                    <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;python&quot;</span><span class=p>,</span>
                    <span class=nt>&quot;module&quot;</span><span class=p>:</span> <span class=s2>&quot;chaosaws.ec2.probes&quot;</span><span class=p>,</span>
                    <span class=nt>&quot;func&quot;</span><span class=p>:</span> <span class=s2>&quot;instance_state&quot;</span><span class=p>,</span>
                    <span class=nt>&quot;arguments&quot;</span><span class=p>:</span> <span class=p>{</span>
                        <span class=nt>&quot;state&quot;</span><span class=p>:</span> <span class=s2>&quot;running&quot;</span><span class=p>,</span>
                        <span class=nt>&quot;instance_ids&quot;</span><span class=p>:</span> <span class=p>[</span>
                            <span class=s2>&quot;&lt;INSTANCE_ID&gt;&quot;</span>
                        <span class=p>],</span>
                        <span class=nt>&quot;filters&quot;</span><span class=p>:</span> <span class=p>[]</span>
                    <span class=p>}</span>
                <span class=p>},</span>
                <span class=nt>&quot;tolerance&quot;</span><span class=p>:</span> <span class=kc>true</span>
            <span class=p>}</span>
        <span class=p>]</span>
    <span class=p>},</span>
    <span class=nt>&quot;method&quot;</span><span class=p>:</span> <span class=p>[],</span>
    <span class=nt>&quot;configuration&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;aws_region&quot;</span><span class=p>:</span> <span class=s2>&quot;&lt;REGION&gt;&quot;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <p>Replace the value of <code>&lt;INSTANCE_ID&gt;</code> with the value of the id of the current instance. Replace <code>&lt;REGION&gt;</code> with the name of the region the instance is deployed in.</p> <p>You can then run the experiment with:</p> <div class=highlight><pre><span></span><code><span class=go>chaos run ./experiment.json</span>
</code></pre></div> <div class=highlight><pre><span></span><code>[2021-08-18 10:12:29 INFO] Validating the experiment&#39;s syntax
[2021-08-18 10:12:29 INFO] Experiment looks valid
[2021-08-18 10:12:29 INFO] Running experiment: Running Chaos Toolkit from an EC2 instance
[2021-08-18 10:12:29 INFO] Steady-state strategy: default
[2021-08-18 10:12:29 INFO] Rollbacks strategy: default
[2021-08-18 10:12:29 INFO] Steady state hypothesis: Current EC2 is RUNNING
[2021-08-18 10:12:29 INFO] Probe: instance_state
[2021-08-18 10:12:29 ERROR]   =&gt; failed: botocore.exceptions.ClientError: An error occurred
(UnauthorizedOperation) when calling the DescribeInstances operation: You are not authorized to
perform this operation.
[2021-08-18 10:12:29 WARNING] Probe terminated unexpectedly, so its tolerance could not be validated
[2021-08-18 10:12:29 CRITICAL] Steady state probe &#39;instance_state&#39; is not in the given tolerance so
failing this experiment
[2021-08-18 10:12:29 INFO] Experiment ended with status: failed
</code></pre></div> <p>You&rsquo;ll notice the error you just received:</p> <div class=highlight><pre><span></span><code>failed: botocore.exceptions.ClientError: An error occurred
(UnauthorizedOperation) when calling the DescribeInstances operation: You are not
authorized to perform this operation.
</code></pre></div> <p>This is because your instance profile role you created earlier doesn&rsquo;t have a suitable policy statement allowing you to describe EC2 instances.</p> <p>Navigate to the IAM console and find the Policy you created earlier, add the following statement to it:</p> <div class=highlight><pre><span></span><code><span class=p>{</span>
    <span class=nt>&quot;Effect&quot;</span><span class=p>:</span> <span class=s2>&quot;Allow&quot;</span><span class=p>,</span>
    <span class=nt>&quot;Action&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=s2>&quot;ec2:DescribeInstance*&quot;</span>
    <span class=p>],</span>
    <span class=nt>&quot;Resource&quot;</span><span class=p>:</span> <span class=s2>&quot;*&quot;</span>
<span class=p>}</span>
</code></pre></div> <p>Run your experiment again:</p> <div class=highlight><pre><span></span><code><span class=go>chaos run ./experiment.json</span>
</code></pre></div> <div class=highlight><pre><span></span><code>[2021-08-18 10:24:56 INFO] Validating the experiment&#39;s syntax
[2021-08-18 10:24:56 INFO] Experiment looks valid
[2021-08-18 10:24:56 INFO] Running experiment: Running Chaos Toolkit from an EC2
instance
[2021-08-18 10:24:56 INFO] Steady-state strategy: default
[2021-08-18 10:24:56 INFO] Rollbacks strategy: default
[2021-08-18 10:24:56 INFO] Steady state hypothesis: Current EC2 is RUNNING
[2021-08-18 10:24:56 INFO] Probe: instance_state
[2021-08-18 10:24:56 INFO] Steady state hypothesis is met!
[2021-08-18 10:24:56 INFO] Playing your experiment&#39;s method now...
[2021-08-18 10:24:56 INFO] No declared activities, let&#39;s move on.
[2021-08-18 10:24:56 INFO] Steady state hypothesis: Current EC2 is RUNNING
[2021-08-18 10:24:56 INFO] Probe: instance_state
[2021-08-18 10:24:56 INFO] Steady state hypothesis is met!
[2021-08-18 10:24:56 INFO] Let&#39;s rollback...
[2021-08-18 10:24:56 INFO] No declared rollbacks, let&#39;s move on.
[2021-08-18 10:24:56 INFO] Experiment ended with status: completed
</code></pre></div> <p>As you&rsquo;ll notice, your EC2 profile now has the suitable permissions. This should ultimately give you a good sense on how IAM allows you to give specific permissions to the instances running your Chaos Toolkit experiments.</p> <h2 id=summary>Summary<a class=headerlink href=#summary title="Permanent link">&para;</a></h2> <p>Whilst the experiment within this guide was simple, the guide was not meant to teach you how to write experiments. The purpose of the guide was to show you how you might run Chaos Toolkit <strong>from</strong> AWS to interact with your AWS infrastructure.</p> <p>You should now have an appreciation and the ability to:</p> <ul> <li>Create an EC2 instance within your AWS network</li> <li>Securely connect to that instance via Session Manager<ul> <li>Negating the need for Security Group policies or SSH access</li> </ul> </li> <li>Setup and run Chaos Toolkit from an EC2 instance</li> <li>Modify the IAM policies for your instance to increase/decrease the experiments ability to interact with your systems.</li> </ul> <h3 id=notes>Notes<a class=headerlink href=#notes title="Permanent link">&para;</a></h3> <p>It should be noted that several things could be done differently in this guide to suit your own setup, they could be as follows:</p> <ul> <li>Using a containerised setup like <a href=../containerising/ >prescribed in this guide</a> within your instance</li> <li>Using a git repository (whether pulled or created) to use version control on the instance and keep your experiments in version control</li> <li>Storing experiments/experiment journals/experiment logs in S3 so they&rsquo;re accessible to others in your organisation</li> <li>Connecting via SSH (if your organisation is less concerned about allowing traffic from your local IP)</li> </ul> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../containerising/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Containerising Chaos Toolkit" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Containerising Chaos Toolkit </div> </div> </a> <a href=../batch/ class="md-footer__link md-footer__link--next" aria-label="Next: Running Chaos Toolkit experiments as AWS Batch Jobs" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Running Chaos Toolkit experiments as AWS Batch Jobs </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> &copy; 2017-2021 Chaos Toolkit team </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/chaostoolkit target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://twitter.com/chaostoolkit target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://join.chaostoolkit.org/ target=_blank rel=noopener title=join.chaostoolkit.org class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1c0-25.9 21.16-47.06 47.06-47.06h47.06v47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V315.1zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06H164.9zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06H164.9zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06h-47.06V196.9zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06 25.9 0 47.06 21.16 47.06 47.06V196.9zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06-25.9 0-47.06-21.16-47.06-47.06v-47.06h47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06 0-25.9 21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06 0 25.9-21.16 47.06-47.06 47.06H283.1z"/></svg> </a> <a href=https://medium.com/chaos-toolkit target=_blank rel=noopener title=medium.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M0 32v448h448V32H0zm372.2 106.1-24 23c-2.1 1.6-3.1 4.2-2.7 6.7v169.3c-.4 2.6.6 5.2 2.7 6.7l23.5 23v5.1h-118V367l24.3-23.6c2.4-2.4 2.4-3.1 2.4-6.7V199.8l-67.6 171.6h-9.1L125 199.8v115c-.7 4.8 1 9.7 4.4 13.2l31.6 38.3v5.1H71.2v-5.1l31.6-38.3c3.4-3.5 4.9-8.4 4.1-13.2v-133c.4-3.7-1-7.3-3.8-9.8L75 138.1V133h87.3l67.4 148L289 133.1h83.2v5z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script> <script src=../../../assets/javascripts/bundle.756773cc.min.js></script> </body> </html>